import{d as G,g as H,j as I,s as K,S as Z,r as J,o as n,b as o,f as a,e as g,F as _,D as f,h as Q,t as m,I as O,u as p,x as W,M as X,C as S,w as Y,N as ee,p as te,i as ae,_ as le}from"./index-KwuTZ_vQ.js";import{C as se}from"./Calculator-tlN5nAme.js";import{g as ne}from"./ModulePage.vue_vue_type_script_setup_true_lang-kwY-Mz53.js";import{s as oe}from"./globals-zpsYnYkF.js";import{b as ue}from"./byTypes-1BYQ2hUk.js";import"./Data-Rj2Vpt7F.js";import"./sec2str-coxus2Nb.js";import"./Page-e2hypn7p.js";const ce=h=>(te("data-v-5a60fb6a"),h=h(),ae(),h),re={class:"container"},ie={class:"sections-input"},de=["onClick"],pe={class:"levels"},me={class:"modal-module"},ve={class:"title"},_e={class:"reset-buttons"},fe={class:"chars"},ye=["onChange"],ke=["selected","disabled"],be=ce(()=>a("li",null,[a("br")],-1)),he={key:0},Ce=G({__name:"ModulesCalc",setup(h){const U=["UnlockPrice","UnlockTime"],{t:P}=H(),w={actually:"CURRENT_LVL",plan:"PLAN_LVL"},A=I({}),d=I({actually:{},plan:{}}),C=I(!1),u=K({size:Z.SMALL,title:P("TID_TECH_DLG_TITLE"),data:{module:{},maxLevel:0,get key(){return this.module.Name}}});let c;function x(l){c=l;for(const s of ue.artifact)A.value[s]=l.provideGetterElements((...v)=>F.apply(null,[s,...v]))}function L(l,s){return c.onChangeLvl(l,u.data.key,s)}function V(l,s){return c.isSelected(l,u.data.key,s)}function q(l,s){return c.isDisabled(l,u.data.key,s)}async function D(l){C.value&&(l.target.name=="all"&&L("actually",0),L("plan",0))}function N(l,s){return c.outputClasses(l,u.data.key,s)}function $(l,s){u.data.module=l,u.data.maxLevel=s,C.value=!0}function z(l,s){const v=s.total;return v.result.ReqBank=0,function(e,i){const t=l[e].UnlockPrice,r=Array.isArray(t)?t[i.plan[e]-1]:t;v.result.ReqBank=r>v.result.ReqBank?r:v.result.ReqBank}}function F(l,...[s,v,e]){const i=ne(l);return Object.entries(i).map(([t,r])=>{let y=1;for(const[,k]of Object.entries(r))Array.isArray(k)&&k.length>y&&(y=k.length);return e[t]=v(i[t],y),s[t]=r.TID,[r,y]})}return(l,s)=>{const v=J("t");return n(),o("div",null,[a("div",re,[g(se,{input:d.value,"onUpdate:input":s[0]||(s[0]=e=>d.value=e),"stack-chars":U,"calc-total":z,"local-storage-key":"modulesCalc","title-key":"MODULES_CALC",onSetup:x},null,8,["input"]),a("div",ie,[(n(!0),o(_,null,f(A.value,(e,i)=>(n(),o("section",{key:i,class:"type"},[a("h3",null,m(p(c).format.key(i)),1),a("ul",null,[(n(!0),o(_,null,f(e,([t,r])=>(n(),o("li",{key:t.Name,class:"module"},[a("div",{class:S({mute:!d.value.plan[t.Name]}),onClick:()=>$(t,r)},[g(O,{name:t.Icon,dir:"game/Modules"},null,8,["name"]),a("div",pe,[a("span",null,m(d.value.actually[t.Name]?d.value.actually[t.Name]:""),1),a("span",null,m(d.value.plan[t.Name]&&d.value.plan[t.Name]!=d.value.actually[t.Name]?d.value.plan[t.Name]:""),1)])],10,de)]))),128))])]))),128))])]),g(X,W({open:C.value,"onUpdate:open":s[1]||(s[1]=e=>C.value=e)},u),{body:Q(()=>[a("div",me,[a("div",ve,[a("div",null,[a("h2",null,m(l.$t(u.data.module.TID)),1),a("div",_e,[a("button",{name:"plan",class:"button yellow",onClick:D},m(l.$t("RESET_PLAN")),1),a("button",{name:"all",class:"button red",onClick:D},m(l.$t("RESET_ALL")),1)])]),g(O,{name:u.data.module.Icon,dir:"game/Modules"},null,8,["name"])]),a("ul",fe,[(n(!0),o(_,null,f(Object.keys(d.value),e=>(n(),o("li",{key:e,class:"input"},[Y(a("span",null,null,512),[[v,w[e]]]),a("select",{class:"select-lvl",onChange:i=>L(e,i.target.value)},[(n(!0),o(_,null,f(u.data.maxLevel+1,(i,t)=>(n(),o("option",{key:i,selected:V(e,t),disabled:q(e,t)},m(t),9,ke))),128))],40,ye)]))),128)),be,(n(!0),o(_,null,f(Object.keys(p(c).output.plan[u.data.key]||{}),e=>{var i,t;return n(),o("li",{key:e,class:S({output:!0,"sub-chars":typeof((t=(i=p(c).output.plan)==null?void 0:i[u.data.key])==null?void 0:t[e])=="object"})},[a("b",null,m(p(c).format.key(e)),1),a("div",null,[(n(!0),o(_,null,f(Object.keys(d.value),r=>{var y,k,E,M;return n(),o("span",{key:r,class:S({...N(r,e),[p(oe)(e)]:!0,"stats-style":r=="actually"?!N(r,e).none:!1})},[typeof((k=(y=p(c).output[r])==null?void 0:y[u.data.key])==null?void 0:k[e])=="object"?(n(),o("ul",he,[(n(!0),o(_,null,f(Object.keys(p(c).output[r][u.data.key][e]||{}),b=>(n(),o("li",{key:b,class:"output"},[a("b",null,m(p(c).format.key(b)),1),a("div",null,[(n(!0),o(_,null,f(Object.keys(d.value),T=>{var j,R,B;return n(),o("span",{key:T,class:S(N(T,b))},m(p(c).format.value(b,(B=(R=(j=p(c).output[T])==null?void 0:j[u.data.key])==null?void 0:R[e])==null?void 0:B[b])),3)}),128))])]))),128))])):(n(),o(_,{key:1},[ee(m(p(c).format.value(e,(M=(E=p(c).output[r])==null?void 0:E[u.data.key])==null?void 0:M[e])),1)],64))],2)}),128))])],2)}),128))])])]),_:1},16,["open"])])}}}),Ee=le(Ce,[["__scopeId","data-v-5a60fb6a"]]);export{Ee as default};
