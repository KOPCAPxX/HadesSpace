import{d as ee,s as te,g as ae,i as L,j as se,S as R,y as le,D as ne,z as oe,r as ue,o as n,b as o,f as s,e as k,u as d,t as v,E as ce,F as f,B as _,h as $,I as w,m as ie,M as V,w as q,x as re,A as T,L as de,p as pe,q as me,l as ve,_ as fe}from"./index-8svx1Vhg.js";import{C as _e}from"./Calculator-pwkwHJxO.js";import{c as ye}from"./compendiumTechList-vHLxO_5x.js";import{g as Ce}from"./ModulePage.vue_vue_type_script_setup_true_lang-Y0a2MPK0.js";import{s as Se}from"./globals-zpsYnYkF.js";import{b as ke}from"./byTypes-1BYQ2hUk.js";import"./Data-PHuS4Sb2.js";import"./sec2str-1pl5OG-e.js";import"./Page-AO34JQcV.js";const ge=g=>(pe("data-v-aef8387d"),g=g(),me(),g),he={class:"container"},be={class:"comp-btn"},Le={class:"sections-input"},Te=["onClick"],Ie={class:"levels"},Ne={class:"modal-module"},Me={class:"title"},Ee={class:"reset-buttons"},De={class:"chars"},Oe=["onChange"],Ue=["selected","disabled"],Ae=ge(()=>s("li",null,[s("br")],-1)),Pe={key:0},je={class:"select"},Be={class:"name"},Re=["value"],$e=["value"],we=ee({__name:"ModulesCalc",setup(g){const x=["UnlockPrice","UnlockTime"],z={actually:"CURRENT_LVL",plan:"PLAN_LVL"},I=te(),{t:H}=ae(),{data:F,levelMap:G,setTechLevel:Y}=ye(),D=L({}),p=L({actually:{},plan:{}}),h=L(!1),N=L(!1),c=se({size:R.SMALL,title:H("TID_TECH_DLG_TITLE"),data:{module:{},maxLevel:0,get key(){return this.module.Name}}});let u;le(async()=>{await ne()}),oe([G,()=>I.state.userSettings.compendiumTechSyncConfigIndex],([t])=>{I.state.userSettings.compendiumTechSyncConfigIndex==u.Config.selected&&(p.value.actually={...t},p.value.plan={...t,...p.value.plan})});function K(t){u=t;for(const a of ke.artifact)D.value[a]=t.provideGetterElements((...m)=>W.apply(null,[a,...m]))}function b(t,a){if(I.state.userSettings.compendiumTechSyncConfigIndex==u.Config.selected&&t=="actually"){const m=ve(c.data.key);Y(m,a)}return u.onChangeLvl(t,c.data.key,a)}function X(t,a){return u.isSelected(t,c.data.key,a)}function Z(t,a){return u.isDisabled(t,c.data.key,a)}async function O(t){h.value&&(t.target.name=="all"&&b("actually",0),b("plan",0))}function M(t,a){return u.outputClasses(t,c.data.key,a)}function J(t,a){c.data.module=t,c.data.maxLevel=a,h.value=!0}function Q(t,a){const m=a.total;return m.result.ReqBank=0,function(e,i){const l=t[e].UnlockPrice,r=Array.isArray(l)?l[i.plan[e]-1]:l;m.result.ReqBank=r>m.result.ReqBank?r:m.result.ReqBank}}function W(t,...[a,m,e]){const i=Ce(t);return Object.entries(i).map(([l,r])=>{let y=1;for(const[,C]of Object.entries(r))Array.isArray(C)&&C.length>y&&(y=C.length);return e[l]=m(i[l],y),a[l]=r.TID,[r,y]})}return(t,a)=>{const m=ue("t");return n(),o("div",null,[s("div",he,[k(_e,{input:p.value,"onUpdate:input":a[0]||(a[0]=e=>p.value=e),"stack-chars":x,"calc-total":Q,"local-storage-key":"modulesCalc","title-key":"MODULES_CALC",onSetup:K},null,8,["input"]),s("div",be,[d(F)?(n(),o("button",{key:0,class:"button accent",onClick:a[1]||(a[1]=e=>N.value=!0)},v(t.$t("HS_COMPENDIUM")),1)):ce("",!0)]),s("div",Le,[(n(!0),o(f,null,_(D.value,(e,i)=>(n(),o("section",{key:i,class:"type"},[s("h3",null,v(d(u).format.key(i)),1),s("ul",null,[(n(!0),o(f,null,_(e,([l,r])=>(n(),o("li",{key:l.Name,class:"module"},[s("div",{class:T({mute:!p.value.plan[l.Name]}),onClick:()=>J(l,r)},[k(w,{name:l.Icon,dir:"game/Modules"},null,8,["name"]),s("div",Ie,[s("span",null,v(p.value.actually[l.Name]?p.value.actually[l.Name]:""),1),s("span",null,v(p.value.plan[l.Name]&&p.value.plan[l.Name]!=p.value.actually[l.Name]?p.value.plan[l.Name]:""),1)])],10,Te)]))),128))])]))),128))])]),k(V,ie({open:h.value,"onUpdate:open":a[2]||(a[2]=e=>h.value=e)},c),{body:$(()=>[s("div",Ne,[s("div",Me,[s("div",null,[s("h2",null,v(t.$t(c.data.module.TID)),1),s("div",Ee,[s("button",{name:"plan",class:"button yellow",onClick:O},v(t.$t("RESET_PLAN")),1),s("button",{name:"all",class:"button red",onClick:O},v(t.$t("RESET_ALL")),1)])]),k(w,{name:c.data.module.Icon,dir:"game/Modules"},null,8,["name"])]),s("ul",De,[(n(!0),o(f,null,_(Object.keys(p.value),e=>(n(),o("li",{key:e,class:"input"},[q(s("span",null,null,512),[[m,z[e]]]),s("select",{class:"select-lvl",onChange:i=>b(e,i.target.value)},[(n(!0),o(f,null,_(c.data.maxLevel+1,(i,l)=>(n(),o("option",{key:i,selected:X(e,l),disabled:Z(e,l)},v(l),9,Ue))),128))],40,Oe)]))),128)),Ae,(n(!0),o(f,null,_(Object.keys(d(u).output.plan[c.data.key]||{}),e=>{var i,l;return n(),o("li",{key:e,class:T({output:!0,"sub-chars":typeof((l=(i=d(u).output.plan)==null?void 0:i[c.data.key])==null?void 0:l[e])=="object"})},[s("b",null,v(d(u).format.key(e)),1),s("div",null,[(n(!0),o(f,null,_(Object.keys(p.value),r=>{var y,C,U,A;return n(),o("span",{key:r,class:T({...M(r,e),[d(Se)(e)]:!0,"stats-style":r=="actually"?!M(r,e).none:!1})},[typeof((C=(y=d(u).output[r])==null?void 0:y[c.data.key])==null?void 0:C[e])=="object"?(n(),o("ul",Pe,[(n(!0),o(f,null,_(Object.keys(d(u).output[r][c.data.key][e]||{}),S=>(n(),o("li",{key:S,class:"output"},[s("b",null,v(d(u).format.key(S)),1),s("div",null,[(n(!0),o(f,null,_(Object.keys(p.value),E=>{var P,j,B;return n(),o("span",{key:E,class:T(M(E,S))},v(d(u).format.value(S,(B=(j=(P=d(u).output[E])==null?void 0:P[c.data.key])==null?void 0:j[e])==null?void 0:B[S])),3)}),128))])]))),128))])):(n(),o(f,{key:1},[de(v(d(u).format.value(e,(A=(U=d(u).output[r])==null?void 0:U[c.data.key])==null?void 0:A[e])),1)],64))],2)}),128))])],2)}),128))])])]),_:1},16,["open"]),k(V,{open:N.value,"onUpdate:open":a[4]||(a[4]=e=>N.value=e),size:d(R).SMALL,title:t.$t("HS_COMPENDIUM")},{body:$(()=>[s("div",je,[q(s("p",Be,null,512),[[m,"SYNC"]]),s("select",{value:t.$store.state.userSettings.compendiumTechSyncConfigIndex,onChange:a[3]||(a[3]=e=>t.$store.commit(d(re).SET_COMPENDIUM_TECH_SYNC_CONFIG_INDEX,parseInt(e.target.value)))},[(n(!0),o(f,null,_(d(u).Config.configs,(e,i)=>(n(),o("option",{key:i,value:i},v(e.name),9,$e))),128))],40,Re)])]),_:1},8,["open","size","title"])])}}}),Xe=fe(we,[["__scopeId","data-v-aef8387d"]]);export{Xe as default};
