import{d as O,s as P,D as B,g as G,i as g,y as V,E as K,v as u,G as D,r as y,o as C,b as I,f as e,u as i,J as f,t as w,w as h,K as J,e as M,h as F,L as U,A as Y,S as k,M as L,p as z,q,N as Z,_ as H}from"./index-G93lJ0jd.js";const R="https://cdn.discordapp.com/";function Q(n,A,c=80){const l=new URL(`avatars/${n}/${A}.webp`,R);return l.searchParams.set("size",String(c)),l}function W(n,A,c=96){const l=new URL(`icons/${n}/${A}.webp`,R);return l.searchParams.set("size",String(c)),l}const N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEe0lEQVR4nN1av2tUQRAeIaDGIkpAwbsE1MJGCzHkQAwGrFN4tWJjo5CAiCaNSLBJDCJ4hRaCCNZn4T+QwiZBsbIW1BMMgr8wIgTifHe75N3e7Lu3v3IXP/iK2/fevPl2Z+ftzt7A08YmJUKJOc48wSwrDqpr68yPzE/Md8xVZiOFEwMJbELYNLOScw+EHlc8r9pWmDWKLDSmwCLC8lBRrCtGERpLIEIR4soRbFWVPYzmaqixGALPMu8WuA/zTY8KRjuvM3BtkXmb+SrEuVCB6Ok8cQg1zC3bSOB5hGXVch22ZylgJEMEYhQWLdeKJoxVRXSEbf7iHRfJc06GCJy2tD9kvnC0BefnmBeYM5Z3zZEHfAXCEam3fcRloZ81RVbUO51t+wqU5kydwsRpwEZZeEeVtkngOHVmQGTIGsVDTXhPWbU5JRwfgVJo1ik+YFMK1eQCzxm/NyhOaJqAzWvU7iPe7RQprgIPMIeNtuDVRg5g+0zm97Dy4VtRA64CjwltSXYBObbhw+uiBlwF7hXaPlM6SLYlH6xwFbhHaPtF6SDZlnywwlXgutB2kNJBsi35YIWrwK9C2yFKB8m25IMVrgI/MFHj2JVpO0npYNreVD4UhqvAP9TKbNkVxlFq7SxiZ9OSsp1FQ/lQGD4fenybzKUa1okxl2rapvRuJ/gIrJO8EI5WR6HW6NkW9E7wEQgR2NCaa9IF5iWKgwWhbYU8OtB3u4RwNAUibJeYNykMSyTXa7ymgK9A9KQUqmPU6n2f+qYuO44J17zDP6RkIe3ZAF3fdNnd20oVQNBeM7SqhjrJfZI/yDOKL5lvme+Z39W1/cwjzFPMqRz7X8izFqMRKhBhc4NaYWmrc05RvggbMHJzFJiZYxR+dUXsOcVDFHFAjMIvEo3veYQNiAZ0GD4NSDDbXviNeRaRB52wdKJJvpJBKr/OPO3wzF/aCjW9gT2csbe7gA19VvGG+YAcQtdFYF4qzwK9jZ7WK49uzpQUMVLSZycLdCxCt/AnqKhAhGO1yz2+53q6E3T46XVo3vvQ0eiIrt/HbgL3UesIy5ZEfjCfUdyyIcTWFBE1l5lDwn3oAHQGTqB+24x1E/iY7CET9STWAnQcRtY2ouh4+Ghd5OcJzPt4B53ZOUKPKOa0dFwHH+GruOKxCbSd1SEL3qK0o2YDOhTnhPdoKwtrwFf43DEnJYGIeykcIO4q8yf1Dg3lwyPqFAmfkcHb8oEpEJP2imBYL516KU4DPiCKpCkE39v+c2MKxDAPUieirAsjwrb+he9tp8FZgfoPASZmqb/EacAn+GYmHr1gaCbBrEBp3i3T9mVLH8C3Zeak0V4lQ6BeKpl4Qv0P+DhptEFLs1arBdpKdP0YmiZs9aFmrVYLHBceTHEsnQqSwKYmCJT+VuVVg+whpFotNJUgcEJ4YIV2HqRi9AQEjgg393PmtEHyecQmcCeFp4bkc1PgqHAhezawQf2NvB3RKC5Km8nYVbJeYSjFf7b7ChC4Rmn/SNBLrEHgPPMO/X8iMXDz/wAiqusPTmWIpwAAAABJRU5ErkJggg==",S=n=>(z("data-v-4fb65e9b"),n=n(),q(),n),X={class:"header"},x={class:"content"},j={key:0,class:"logged fetching"},$={class:"avatar"},ee=["src"],te=["src"],ae=S(()=>e("p",null,null,-1)),se={class:"avatar"},oe=["src","alt"],ne=["src","alt"],le={key:2,class:"not-logged"},re=S(()=>e("div",{class:"footer"},[e("div",{class:"content"},[e("p",null,[Z("Powered by "),e("a",{href:"https://hs-compendium.com/",target:"_blank"},"HS Compendium")])])],-1)),ue={class:"input"},ie={class:"name"},ce={class:"error-msg"},de=S(()=>e("a",{href:"https://hs-compendium.com/",target:"_blank"},"HS Compendium",-1)),ve=O({__name:"CompendiumPage",setup(n){const A=/[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}/,c=P(),l=B(),{t:_}=G(),d=g(!1),v=g(""),E=g(""),s=g(!1),o=g(),m=g();V(async()=>{s.value=!0,await K();const t=u.getUser();s.value=!1,t?(o.value=t,m.value=u.getGuild()):(d.value=!0,"c"in l.currentRoute.value.query&&(v.value=l.currentRoute.value.query.c,b()))});async function b(){let t;if(!v.value){E.value=_("CANNOT_BE_EMPTY");return}if(!A.test(v.value)){E.value=_("INCORRECT_CODE");return}s.value=!0;try{t=await u.checkConnectCode(v.value)}catch(p){E.value=p.toString(),console.error(p),s.value=!1;return}s.value=!1,d.value=!1,await c.dispatch(D.OPEN_CONFIRM,_("CONFIRM_LOGIN",[t.guild.name,t.user.username])).catch(()=>(d.value=!0,!0))||(s.value=!0,await u.connect(t),o.value=u.getUser(),m.value=u.getGuild(),s.value=!1)}function T(){c.dispatch(D.OPEN_CONFIRM,_("TID_SETTINGS_DLG_SIGN_OUT")).then(()=>{u.logout(),o.value=void 0,m.value=void 0}).catch(()=>{})}return(t,a)=>{const p=y("t");return C(),I("div",null,[e("div",X,[e("div",x,[s.value&&!o.value?(C(),I("div",j,[e("div",$,[e("img",{src:i(N),alt:"memberImage avatar"},null,8,ee),e("img",{src:i(N),alt:"memberImage avatar"},null,8,te)]),ae])):f("",!0),o.value?(C(),I("div",{key:1,class:"logged",onClick:T},[e("div",se,[e("img",{src:i(W)(m.value.id,m.value.icon).href,alt:`${m.value.name} icon`,onError:a[0]||(a[0]=r=>r.target.src=i(N))},null,40,oe),e("img",{src:i(Q)(o.value.id,o.value.avatar).href,alt:`${o.value.username} avatar`,onError:a[1]||(a[1]=r=>r.target.src=i(N))},null,40,ne)]),e("p",null,w(o.value.username),1)])):f("",!0),!s.value&&!o.value?(C(),I("div",le,[h(e("span",null,null,512),[[p,"TID_SETTINGS_DLG_NOT_SIGNED_IN"]]),e("button",{class:"button accent",onClick:a[2]||(a[2]=r=>d.value=!0)},w(t.$t("TID_SETTINGS_DLG_SIGN_IN")),1)])):f("",!0)])]),J(t.$slots,"default",{},void 0,!0),re,M(L,{open:d.value,"onUpdate:open":a[4]||(a[4]=r=>d.value=r),title:t.$t("TID_SETTINGS_DLG_SIGN_IN"),size:i(k).SMALL},{body:F(()=>[e("div",ue,[e("p",ie,[h(e("span",null,null,512),[[p,"ENTER_CODE"]]),e("span",ce,w(E.value),1)]),h(e("input",{"onUpdate:modelValue":a[3]||(a[3]=r=>v.value=r)},null,512),[[U,v.value]])]),de,e("div",{class:Y(["code-req-btn-wrap",{disable:s.value}])},[h(e("button",{class:"button accent",onClick:b},null,512),[[p,"TID_LINK_DEVICE_DLG_SUBMIT_CODE_BTN"]])],2)]),_:1},8,["open","title","size"])])}}}),pe=H(ve,[["__scopeId","data-v-4fb65e9b"]]);export{pe as C,Q as g,N as m};
