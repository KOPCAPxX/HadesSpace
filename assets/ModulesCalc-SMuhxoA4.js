import{d as le,s as se,g as oe,i as b,j as ne,S as B,y as ue,D as re,z as ce,r as ie,o as u,b as r,f as l,e as C,u as c,t as v,E as de,h as R,I as pe,F as _,B as L,m as me,M as w,w as $,x as ve,A as E,L as fe,p as _e,q as ye,l as Ce,_ as Le}from"./index-ftiIWVYl.js";import{C as ge}from"./Calculator-DLDJaRur.js";import{T as he}from"./TechList-oE224VXF.js";import{N as Se}from"./NumberPicker-wCfBeHlp.js";import{c as ke}from"./compendiumTechList-_TTgmfAO.js";import{m as V,g as be}from"./ModulePage.vue_vue_type_script_setup_true_lang-P3gZtLn-.js";import{g as Te,s as Ie}from"./globals-zpsYnYkF.js";import{b as Me}from"./byTypes-1BYQ2hUk.js";import{o as q}from"./Data-uvGCel4U.js";import"./MultiConfigGUI-4a5HA2qm.js";import"./capital_ships-ioQeNDqF.js";import"./spacebuildings-NmTc9Pj4.js";import"./Page-5FuQmhrK.js";import"./sec2str-enjU3bii.js";const Ne=h=>(_e("data-v-1e2758d5"),h=h(),ye(),h),Ee={class:"container"},Ae={class:"comp-btn"},Ue={class:"tech-list-wrap"},De={class:"modal-module"},Oe={class:"title"},je={class:"reset-buttons"},Pe={class:"chars"},xe={class:"level-picker"},Be=Ne(()=>l("li",null,[l("br")],-1)),Re={key:0},we={class:"select"},$e={class:"name"},Ve=["value"],qe=["value"],ze=le({__name:"ModulesCalc",setup(h){const z=["UnlockPrice","UnlockTime"],H={actually:"CURRENT_LVL",plan:"PLAN_LVL"},T=se(),{t:F}=oe(),{data:G,levelMap:Y,setTechLevel:K}=ke(),{MaxModuleLevel:y}=Te,X=q(V,{map:([e])=>[e,y]}),Z=q(V,{map:([e,a])=>[e,ae(a)]}),J=b({}),d=b({actually:{},plan:{}}),S=b(!1),I=b(!1),s=ne({size:B.SMALL,title:F("TID_TECH_DLG_TITLE"),data:{module:{},minLevel:0,maxLevel:0,get key(){return this.module.Name}}});let n;ue(async()=>{await re()}),ce([Y,()=>T.state.userSettings.compendiumTechSyncConfigIndex],([e])=>{T.state.userSettings.compendiumTechSyncConfigIndex==n.Config.selected&&(d.value.actually={...e},d.value.plan={...e,...d.value.plan})});function Q(e){n=e;for(const a of Me.artifact)J.value[a]=e.provideGetterElements((...o)=>te.apply(null,[a,...o]))}function k(e,a){if(T.state.userSettings.compendiumTechSyncConfigIndex==n.Config.selected&&e=="actually"){const o=Ce(s.data.key);K(o,a)}return n.onChangeLvl(e,s.data.key,a)}async function A(e){S.value&&(e.target.name=="all"&&k("actually",0),k("plan",0))}function M(e,a){return n.outputClasses(e,s.data.key,a)}function W(e){s.data.module=e,s.data.maxLevel=X[e.Name],s.data.minLevel=Z[e.Name],S.value=!0}function ee(e,a){const o=a.total;return o.result.ReqBank=0,function(t,p){const m=e[t].UnlockPrice,i=Array.isArray(m)?m[p.plan[t]-1]:m;o.result.ReqBank=i>o.result.ReqBank?i:o.result.ReqBank}}function te(e,...[a,o,t]){const p=be(e);return Object.entries(p).map(([m,i])=>{for(const[,f]of Object.entries(i))Array.isArray(f)&&f.length<y&&f.unshift(...Array(y-f.length));return t[m]=o(p[m],y),a[m]=i.TID,[i,y]})}function ae(e){let a=1;for(const[,o]of Object.entries(e))Array.isArray(o)&&o.length>a&&(a=o.length);return y-a+1}return(e,a)=>{const o=ie("t");return u(),r("div",null,[l("div",Ee,[C(ge,{input:d.value,"onUpdate:input":a[0]||(a[0]=t=>d.value=t),"stack-chars":z,"calc-total":ee,"local-storage-key":"modulesCalc","title-key":"MODULES_CALC",onSetup:Q},null,8,["input"]),l("div",Ae,[c(G)?(u(),r("button",{key:0,class:"button accent",onClick:a[1]||(a[1]=t=>I.value=!0)},v(e.$t("HS_COMPENDIUM")),1)):de("",!0)]),l("div",Ue,[C(he,{"on-click":W,"level-map":d.value.actually,"level-map-alt":d.value.plan,"is-muted":t=>!d.value.plan[t]},null,8,["level-map","level-map-alt","is-muted"])])]),C(w,me({open:S.value,"onUpdate:open":a[2]||(a[2]=t=>S.value=t)},s),{body:R(()=>[l("div",De,[l("div",Oe,[l("div",null,[l("h2",null,v(e.$t(s.data.module.TID)),1),l("div",je,[l("button",{name:"plan",class:"button yellow",onClick:A},v(e.$t("RESET_PLAN")),1),l("button",{name:"all",class:"button red",onClick:A},v(e.$t("RESET_ALL")),1)])]),C(pe,{name:s.data.module.Icon,dir:"game/Modules"},null,8,["name"])]),l("ul",Pe,[(u(!0),r(_,null,L(Object.keys(d.value),t=>(u(),r("li",{key:t,class:"input"},[$(l("span",null,null,512),[[o,H[t]]]),l("div",xe,[C(Se,{value:d.value[t][s.data.key]||0,min:s.data.minLevel,max:s.data.maxLevel,"onUpdate:value":p=>k(t,p)},null,8,["value","min","max","onUpdate:value"])])]))),128)),Be,(u(!0),r(_,null,L(Object.keys(c(n).output.plan[s.data.key]||{}),t=>{var p,m;return u(),r("li",{key:t,class:E({output:!0,"sub-chars":typeof((m=(p=c(n).output.plan)==null?void 0:p[s.data.key])==null?void 0:m[t])=="object"})},[l("b",null,v(c(n).format.key(t)),1),l("div",null,[(u(!0),r(_,null,L(Object.keys(d.value),i=>{var f,U,D,O;return u(),r("span",{key:i,class:E({...M(i,t),[c(Ie)(t)]:!0,"stats-style":i=="actually"?!M(i,t).none:!1})},[typeof((U=(f=c(n).output[i])==null?void 0:f[s.data.key])==null?void 0:U[t])=="object"?(u(),r("ul",Re,[(u(!0),r(_,null,L(Object.keys(c(n).output[i][s.data.key][t]||{}),g=>(u(),r("li",{key:g,class:"output"},[l("b",null,v(c(n).format.key(g)),1),l("div",null,[(u(!0),r(_,null,L(Object.keys(d.value),N=>{var j,P,x;return u(),r("span",{key:N,class:E(M(N,g))},v(c(n).format.value(g,(x=(P=(j=c(n).output[N])==null?void 0:j[s.data.key])==null?void 0:P[t])==null?void 0:x[g])),3)}),128))])]))),128))])):(u(),r(_,{key:1},[fe(v(c(n).format.value(t,(O=(D=c(n).output[i])==null?void 0:D[s.data.key])==null?void 0:O[t])),1)],64))],2)}),128))])],2)}),128))])])]),_:1},16,["open"]),C(w,{open:I.value,"onUpdate:open":a[4]||(a[4]=t=>I.value=t),size:c(B).SMALL,title:e.$t("HS_COMPENDIUM")},{body:R(()=>[l("div",we,[$(l("p",$e,null,512),[[o,"SYNC"]]),l("select",{value:e.$store.state.userSettings.compendiumTechSyncConfigIndex,onChange:a[3]||(a[3]=t=>e.$store.commit(c(ve).SET_COMPENDIUM_TECH_SYNC_CONFIG_INDEX,parseInt(t.target.value)))},[(u(!0),r(_,null,L(c(n).Config.configs,(t,p)=>(u(),r("option",{key:p,value:p},v(t.name),9,qe))),128))],40,Ve)])]),_:1},8,["open","size","title"])])}}}),st=Le(ze,[["__scopeId","data-v-1e2758d5"]]);export{st as default};
