import{d as $,g as P,i as V,j as w,S as H,k as q,r as z,o as G,c as K,h as v,e as i,f as n,t as f,u,H as X,w as Y,m as Z,M as F,l as S,n as h,I as _,p as J,q as Q,_ as W}from"./index-3YbIOA3X.js";import{c as ee}from"./compendiumTechList--XZaCvXQ.js";import{m as O,g as te}from"./ModulePage.vue_vue_type_script_setup_true_lang-aXyUYlcU.js";import{C as ae}from"./CompendiumPage-PAogUYyi.js";import{T as ne}from"./TechList-VvZ8YUN3.js";import{N as se}from"./NumberPicker-Rd4sawPe.js";import{g as le}from"./globals-zpsYnYkF.js";import{s as I}from"./capital_ships-nQL5Fb_r.js";import{a as oe}from"./alliance_levels-o1qIIhIq.js";import{s as A}from"./spacebuildings-NmTc9Pj4.js";import"./Data-WJGL2H-q.js";import"./sec2str-r_2mboaK.js";import"./Page-7-Usm1_W.js";import"./byTypes-1BYQ2hUk.js";const ie=r=>(J("data-v-f2021b13"),r=r(),Q(),r),re={class:"container"},ce={class:"modal"},me={class:"title"},de=ie(()=>n("div",null,null,-1)),ue={class:"level-picker"},pe=$({__name:"CompendiumTech",setup(r){const g={RedStarScanner:A.RedStarScanner,ShipmentRelay:A.ShipmentRelay},T={Transport:I.Transport,Miner:I.Miner,Battleship:I.Battleship},{MaxModuleLevel:B}=le,D=Object.fromEntries([...Object.entries(g).map(([e,t])=>[e,t.Cost.length]),...Object.entries(T).map(([e,t])=>[e,t.BuildCost.length]),...Object.keys(O).map(e=>[e,B]),["AllianceLevel",oe.XPRequired.length]]),N=Object.fromEntries([...Object.keys(g).map(e=>[e,0]),...Object.keys(T).map(e=>[e,0]),...Object.entries(O).map(([e,t])=>[e,te(t)]),["AllianceLevel",0]]),{data:s,levelMap:b,setTechLevel:y}=ee(),{t:l}=P(),C=l("HS_COMPENDIUM"),c=V(!1),a=w({size:H.SMALL,title:l("TECHNOLOGIES"),data:{value:{},maxLevel:0,minLevel:0,lastAgoUpdate:0,get key(){return this.value.Name}}}),E=setInterval(p,5e3);q(()=>{clearTimeout(E)});function k(e){s.value&&(a.data.value=e,a.data.maxLevel=D[e.Name],a.data.minLevel=N[e.Name],c.value=!0,p())}function R(e){var t;return!((t=m(e))!=null&&t.level)}function x(e){const t=S(a.data.key);return s.value[t]||(s.value[t]={level:0}),a.data.minLevel!=0&&e==a.data.minLevel&&s.value[t].level!=0&&(e=0),s.value[t].level!=e&&(s.value[t].level=e,y(t,e),p()),e}function m(e){var t;return((t=s.value)==null?void 0:t[S(e)])||null}function j(){var t;const e=a.data.value;if(e.Icon)return h(_,{name:e.Icon,dir:e.specialIcon?"icons":"game/Modules"});if(e.Model)return h(_,{name:e.Model[((t=m(e.Name))==null?void 0:t.level)-1||5],dir:"game/Ships"});if(e.PrefabModel)return h(_,{name:e.PrefabModel,dir:"game/SpaceBuildings"})}function p(){var e;if(c.value){const t=(e=m(a.data.key))==null?void 0:e.ts;t&&(a.data.lastAgoUpdate=(new Date().getTime()-t)/1e3)}}function U(e){const t=[],d=Math.trunc(e/86400),o=Math.trunc(e%86400/3600),M=Math.trunc(e%3600/60),L=Math.trunc(e%60);return d!=0&&t.push(`${d}${l("TID_DAY_ABBREVIATION")}`),o!=0&&t.push(`${o}${l("TID_HOUR_ABBREVIATION")}`),M!=0&&t.push(`${M}${l("TID_MINUTE_ABBREVIATION")}`),L!=0&&t.push(`${L}${l("TID_SECOND_ABBREVIATION")}`),t.slice(0,2).join(" ")}return(e,t)=>{const d=z("t");return G(),K(ae,null,{default:v(()=>[i(u(X),null,{default:v(()=>[n("title",null,f(u(C)),1)]),_:1}),n("div",null,[n("div",re,[i(ne,{"on-click":k,"is-muted":R,"level-map":u(b)},null,8,["level-map"])]),i(F,Z({open:c.value,"onUpdate:open":t[0]||(t[0]=o=>c.value=o)},a),{body:v(()=>{var o;return[n("div",ce,[n("div",me,[n("div",null,[n("h2",null,f(e.$t(a.data.value.TID)),1),n("p",null,f(u(l)("TID_SOCIAL_TIMESTAMP",[U(a.data.lastAgoUpdate)])),1),de]),i(j)]),Y(n("span",null,null,512),[[d,"CURRENT_LVL"]]),n("div",ue,[i(se,{value:((o=m(a.data.key))==null?void 0:o.level)||0,min:a.data.minLevel,max:a.data.maxLevel,"onUpdate:value":x},null,8,["value","min","max"])])])]}),_:1},16,["open"])])]),_:1})}}}),Ne=W(pe,[["__scopeId","data-v-f2021b13"]]);export{Ne as default};
