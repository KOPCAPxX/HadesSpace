import{d as ie,s as ae,aI as de,g as ue,i as S,j as re,y as pe,D as ce,z as ve,x as me,r as _e,o as u,b as r,e as p,h as y,u as n,f as o,t as v,w as C,F as h,B as T,E as k,M as L,H as fe,I as N,A,aM as F,S as E,_ as Ce}from"./index-_uruua_d.js";import{g as he,m as H}from"./ModulePage.vue_vue_type_script_setup_true_lang-s9vmzFLV.js";import{M as z,a as Me}from"./MultiConfigGUI-WwhUMJjN.js";import{c as Se}from"./compendiumTechList-fupV3UCS.js";import{b as ye}from"./byTypes-1BYQ2hUk.js";import{g as ge}from"./globals-PgLFRr2B.js";import{s as w}from"./capital_ships-MKv68Vt8.js";import{T as R}from"./TechList-yHNIl8JQ.js";import{N as Ie}from"./NumberPicker-amDoVF-V.js";import{o as Te}from"./Data-i0oFVlNi.js";import"./Page-yyM28jC3.js";import"./spacebuildings-NmTc9Pj4.js";import"./sec2str-GCEugq2j.js";const Le={class:"container"},Ee={class:"topic"},De={class:"buttons"},be={key:0,class:"ship-list"},ke=["onClick"],Ne={class:"icon"},Oe={class:"body"},Ue={class:"modules"},Be={key:0,class:"level"},$e={class:"create-ship-list"},Ae=["onClick"],He=["onUpdate:modelValue"],ze=["value"],we={class:"edit-ship"},Pe={class:"modal-module"},Ge={class:"title"},je={class:"level-picker"},Ye={class:"module-levels"},Ve={class:"select"},xe={class:"name"},Fe=["value"],Re=["value"],qe={disabled:""},Ke=["value"],We={disabled:""},Ze=["value"],Je={name:"ShipBuild"};var q=(_=>(_[_.NONE=null]="NONE",_.EDIT="Edit",_.MODULES_CALC="ModulesCalc",_.HS_COMPENDIUM="HSCompendium",_))(q||{});const Qe=ie({...Je,setup(_){const K="shipBuild",W="modulesCalc",f={levels:{Transport:1,Miner:1,Battleship:1},ships:[]},g={Battleship:w.Battleship,Transport:w.Transport,Miner:w.Miner},{MaxModuleLevel:Z}=ge,J=Te(H,{map:([l,e])=>[l,he(e)]}),P=ae(),G=de(),{t:Q}=ue(),{data:X,levelMap:j}=Se(),s=new z(K,f),Y=new z(W,{}),V=Q("SHIP_BUILD"),x=Object.keys(g),D=S(!1),O=S(!1),b=S(!1),U=S(!1),B=S(!1),M=S(P.state.userSettings.shipBuildSync),i=re({data:{hideModulesTypes:[],removeShip:()=>{},ship:{slots:[]},module:{Name:"",Icon:"",TID:""},updateModule:()=>{}}});if(M.value.provider!="HSCompendium"&&$(),G.currentRoute.value.query.d){const e={...z.parseUrl(G.currentRoute.value.query.d)};s.add(e,{temporary:!0})}pe(async()=>{await ce(),$()}),ve(j,l=>{M.value.provider=="HSCompendium"&&(s.selectedConfig.levels={...l})});function ee(l){s.selectedConfig.ships.push({meta:{type:l},slots:[]}),s.selectedConfig.ships.sort((e,d)=>x.indexOf(e.meta.type)-x.indexOf(d.meta.type)),s.save(),D.value=!1}function se(l){const e=s.selectedConfig.ships[l],{levels:d}=s.selectedConfig,c=[],{NewModuleSlots:t}=g[e.meta.type];typeof t=="string"?c.push(...Array(d[e.meta.type]).fill(t)):Array.isArray(t)&&c.push(...t.slice(0,d[e.meta.type]).flat()),e.slots.length||(e.slots=c),i.data.ship=e,i.data.hideModulesTypes=ye.artifact.filter(a=>!c.includes(a)),i.data.removeShip=()=>{s.selectedConfig.ships.splice(l,1),s.save(),b.value=!1},s.save(),b.value=!0}function te(l){return i.data.ship.slots.includes(l)}function le({SlotType:l,Name:e}){const d=i.data.ship.slots.indexOf(e);if(d!=-1)i.data.ship.slots[d]=l;else{const c=i.data.ship.slots.indexOf(l);c!=-1&&(i.data.ship.slots[c]=e)}s.save()}function oe(l){i.data.module=l,i.data.updateModule=e=>{s.selectedConfig.levels[l.Name]=e,s.save()},U.value=!0}function $(){var d,c,t,a,I,m;const{provider:l,index:e}=M.value;l=="ModulesCalc"&&(s.selectedConfig.levels={Transport:((c=(d=s==null?void 0:s.selectedConfig)==null?void 0:d.levels)==null?void 0:c.Transport)??f.levels.Transport,Miner:((a=(t=s==null?void 0:s.selectedConfig)==null?void 0:t.levels)==null?void 0:a.Miner)??f.levels.Miner,Battleship:((m=(I=s==null?void 0:s.selectedConfig)==null?void 0:I.levels)==null?void 0:m.Battleship)??f.levels.Battleship,...Y.store.configs[e].value.actually}),l=="HSCompendium"&&(s.selectedConfig.levels={...j.value}),l==null&&Object.keys(s.selectedConfig.levels).length!=Object.keys(f.levels).length&&(s.selectedConfig.levels={...f.levels}),P.commit(me.SET_SHIP_BUILD_SYNC,M.value),s.save()}return(l,e)=>{var c;const d=_e("t");return u(),r("div",Le,[p(n(fe),null,{default:y(()=>[o("title",null,v(n(V)),1)]),_:1}),o("h1",Ee,v(n(V)),1),o("div",De,[o("button",{class:"settings-btn",onClick:e[0]||(e[0]=t=>B.value=!0)}),C(o("button",{class:"button accent",onClick:e[1]||(e[1]=t=>D.value=!0)},null,512),[[d,"TID_PC_NEW_SHIP"]]),C(o("button",{class:"button accent",onClick:e[2]||(e[2]=t=>O.value=!0)},null,512),[[d,"TID_MODULE_LEVEL_HINT_TITLE"]])]),Object.keys((c=n(s).selectedConfig)==null?void 0:c.levels).length?(u(),r("ul",be,[(u(!0),r(h,null,T(n(s).selectedConfig.ships,({meta:{type:t},slots:a},I)=>(u(),r("li",{key:`${t}${I}`,class:"ship",onClick:m=>se(I)},[o("div",Ne,[p(N,{dir:"game/Ships",name:g[t].Model[n(s).selectedConfig.levels[t]-1]},null,8,["name"])]),o("div",Oe,[C(o("p",null,null,512),[[d,g[t].TID]]),o("ul",Ue,[(u(!0),r(h,null,T(a,(m,ne)=>(u(),r("li",{key:`${m}${ne}`},[m in n(H)?(u(),r(h,{key:0},[p(N,{dir:"game/Modules",name:n(H)[m].Icon},null,8,["name"]),n(s).selectedConfig.levels[m]?(u(),r("span",Be,v(n(s).selectedConfig.levels[m]),1)):k("",!0)],64)):k("",!0)]))),128))])])],8,ke))),128))])):k("",!0),p(L,{open:D.value,"onUpdate:open":e[4]||(e[4]=t=>D.value=t),title:l.$t("TID_PC_NEW_SHIP"),size:n(E).SMALL},{body:y(()=>[o("ul",$e,[(u(),r(h,null,T(g,t=>o("li",{key:t.Name,class:"ship"},[o("div",{class:"icon",onClick:a=>ee(t.Name)},[p(N,{dir:"game/Ships",name:t.Model[n(s).selectedConfig.levels[t.Name]-1]},null,8,["name"])],8,Ae),o("div",{class:A(["select",{disable:l.$store.state.userSettings.shipBuildSync.provider=="HSCompendium"}])},[C(o("select",{"onUpdate:modelValue":a=>n(s).selectedConfig.levels[t.Name]=a,onChange:e[3]||(e[3]=(...a)=>n(s).save&&n(s).save(...a))},[(u(!0),r(h,null,T(t.BuildCost.length,a=>(u(),r("option",{key:a,value:a},v(a),9,ze))),128))],40,He),[[F,n(s).selectedConfig.levels[t.Name]]])],2)])),64))])]),_:1},8,["open","title","size"]),p(L,{open:b.value,"onUpdate:open":e[6]||(e[6]=t=>b.value=t),title:l.$t("TID_CORP_DIALOG_EDIT"),size:n(E).LARGE},{body:y(()=>[o("div",we,[o("div",{class:A(["tech-list",i.data.hideModulesTypes])},[p(R,{"is-muted":te,"on-click":le})],2),C(o("button",{class:"button red",onClick:e[5]||(e[5]=(...t)=>i.data.removeShip&&i.data.removeShip(...t))},null,512),[[d,"TID_DISBAND_SHIP_BUTTON"]])])]),_:1},8,["open","title","size"]),p(L,{open:U.value,"onUpdate:open":e[7]||(e[7]=t=>U.value=t),title:l.$t("TID_CORP_DIALOG_EDIT"),size:n(E).SMALL},{body:y(()=>[o("div",Pe,[o("div",Ge,[o("div",null,[o("h2",null,v(l.$t(i.data.module.TID)),1)]),p(N,{name:i.data.module.Icon,dir:"game/Modules"},null,8,["name"])]),o("div",je,[p(Ie,{value:n(s).selectedConfig.levels[i.data.module.Name]||0,min:n(J)[i.data.module.Name],max:n(Z),"onUpdate:value":i.data.updateModule},null,8,["value","min","max","onUpdate:value"])])])]),_:1},8,["open","title","size"]),p(L,{open:O.value,"onUpdate:open":e[9]||(e[9]=t=>O.value=t),title:l.$t("TID_MODULE_LEVEL_HINT_TITLE"),size:n(E).LARGE},{body:y(()=>[o("div",Ye,[o("div",Ve,[C(o("p",xe,null,512),[[d,"SYNC"]]),C(o("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>M.value=t),onChange:$},[o("option",{value:{provider:q.NONE}},v(l.$t("TID_PLAYER_INFO_CORP_NONE")),9,Fe),o("option",{value:{provider:"Edit"}},v(l.$t("TID_CORP_DIALOG_EDIT")),9,Re),o("option",qe,"--- "+v(l.$t("MODULES_CALC"))+" ---",1),(u(!0),r(h,null,T(n(Y).store.configs,(t,a)=>(u(),r("option",{key:a,value:{provider:"ModulesCalc",index:a}},v(t.name),9,Ke))),128)),n(X)?(u(),r(h,{key:0},[o("option",We,"--- "+v(l.$t("HS_COMPENDIUM"))+" ---",1),o("option",{value:{provider:"HSCompendium",index:0}}," 0 ",8,Ze)],64)):k("",!0)],544),[[F,M.value]])]),o("div",{class:A(["tech-list",{disable:l.$store.state.userSettings.shipBuildSync.provider!="Edit"}])},[p(R,{"level-map":n(s).selectedConfig.levels,"on-click":oe},null,8,["level-map"])],2)])]),_:1},8,["open","title","size"]),p(L,{open:B.value,"onUpdate:open":[e[10]||(e[10]=t=>B.value=t),e[11]||(e[11]=()=>n(s).save())],title:l.$t("TID_SETTINGS_DLG_TITLE"),size:n(E).MEDIUM},{body:y(()=>[p(Me,{"on-create-new":()=>n(s).add(f),instance:n(s)},null,8,["on-create-new","instance"])]),_:1},8,["open","title","size"])])}}}),cs=Ce(Qe,[["__scopeId","data-v-2d2d09d6"]]);export{q as PROVIDERS,cs as default};
