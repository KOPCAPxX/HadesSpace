import{d as ae,s as le,g as se,i as k,j as oe,S as B,y as ne,D as ue,z as ce,r as ie,o as n,b as u,f as l,e as y,u as c,t as v,E as re,h as R,I as de,F as _,B as C,m as pe,M as w,w as $,x as me,A as E,L as ve,p as fe,q as _e,l as ye,_ as Ce}from"./index-QPyQLpM8.js";import{m as V,g as Le,a as Se}from"./ModulePage.vue_vue_type_script_setup_true_lang-oqf5vloL.js";import{C as be}from"./Calculator-CJB4g2Nu.js";import{T as ge}from"./TechList-DqyrVBgY.js";import{N as he}from"./NumberPicker-Ufeoah90.js";import{c as ke}from"./compendiumTechList-3N_J2-c3.js";import{g as Te,s as Ie}from"./globals-zpsYnYkF.js";import{b as Me}from"./byTypes-1BYQ2hUk.js";import{o as q}from"./Data-BvdkAhGW.js";import"./Page-1Ll4-xAd.js";import"./MultiConfigGUI-wAZPRMJp.js";import"./capital_ships-ioQeNDqF.js";import"./spacebuildings-NmTc9Pj4.js";import"./sec2str-GrwCNvGz.js";const Ne=b=>(fe("data-v-fb8b76f1"),b=b(),_e(),b),Ee={class:"container"},Ue={class:"comp-btn"},Ae={class:"tech-list-wrap"},De={class:"modal-module"},Oe={class:"title"},Pe={class:"reset-buttons"},je={class:"chars"},xe={class:"level-picker"},Be=Ne(()=>l("li",null,[l("br")],-1)),Re={key:0},we={class:"select"},$e={class:"name"},Ve=["value"],qe=["value"],ze=ae({__name:"ModulesCalc",setup(b){const z=["UnlockPrice","UnlockTime"],H={actually:"CURRENT_LVL",plan:"PLAN_LVL"},T=le(),{t:F}=se(),{data:G,levelMap:Y,setTechLevel:K}=ke(),{MaxModuleLevel:L}=Te,X=q(V,{map:([t])=>[t,L]}),Z=q(V,{map:([t,a])=>[t,Le(a)]}),J=k({}),d=k({actually:{},plan:{}}),g=k(!1),I=k(!1),s=oe({size:B.SMALL,title:F("TID_TECH_DLG_TITLE"),data:{module:{},minLevel:0,maxLevel:0,get key(){return this.module.Name}}});let o;ne(async()=>{await ue()}),ce([Y,()=>T.state.userSettings.compendiumTechSyncConfigIndex],([t])=>{T.state.userSettings.compendiumTechSyncConfigIndex==o.Config.selected&&(d.value.actually={...t},d.value.plan={...t,...d.value.plan})});function Q(t){o=t;for(const a of Me.artifact)J.value[a]=t.provideGetterElements((...r)=>te.apply(null,[a,...r]))}function h(t,a){if(T.state.userSettings.compendiumTechSyncConfigIndex==o.Config.selected&&t=="actually"){const r=ye(s.data.key);K(r,a)}return o.onChangeLvl(t,s.data.key,a)}async function U(t){g.value&&(t.target.name=="all"&&h("actually",0),h("plan",0))}function M(t,a){return o.outputClasses(t,s.data.key,a)}function W(t){s.data.module=t,s.data.maxLevel=X[t.Name],s.data.minLevel=Z[t.Name],g.value=!0}function ee(t,a){const r=a.total;return r.result.ReqBank=0,function(e,p){const m=t[e].UnlockPrice,i=Array.isArray(m)?m[p.plan[e]-1]:m;r.result.ReqBank=i>r.result.ReqBank?i:r.result.ReqBank}}function te(t,...[a,r,e]){const p=Se(t);return Object.entries(p).map(([m,i])=>{for(const[,f]of Object.entries(i))Array.isArray(f)&&f.length<L&&f.unshift(...Array(L-f.length));return e[m]=r(p[m],L),a[m]=i.TID,[i,L]})}return(t,a)=>{const r=ie("t");return n(),u("div",null,[l("div",Ee,[y(be,{input:d.value,"onUpdate:input":a[0]||(a[0]=e=>d.value=e),"stack-chars":z,"calc-total":ee,"local-storage-key":"modulesCalc","title-key":"MODULES_CALC",onSetup:Q},null,8,["input"]),l("div",Ue,[c(G)?(n(),u("button",{key:0,class:"button accent",onClick:a[1]||(a[1]=e=>I.value=!0)},v(t.$t("HS_COMPENDIUM")),1)):re("",!0)]),l("div",Ae,[y(ge,{"on-click":W,"level-map":d.value.actually,"level-map-alt":d.value.plan,"is-muted":e=>!d.value.plan[e]},null,8,["level-map","level-map-alt","is-muted"])])]),y(w,pe({open:g.value,"onUpdate:open":a[2]||(a[2]=e=>g.value=e)},s),{body:R(()=>[l("div",De,[l("div",Oe,[l("div",null,[l("h2",null,v(t.$t(s.data.module.TID)),1),l("div",Pe,[l("button",{name:"plan",class:"button yellow",onClick:U},v(t.$t("RESET_PLAN")),1),l("button",{name:"all",class:"button red",onClick:U},v(t.$t("RESET_ALL")),1)])]),y(de,{name:s.data.module.Icon,dir:"game/Modules"},null,8,["name"])]),l("ul",je,[(n(!0),u(_,null,C(Object.keys(d.value),e=>(n(),u("li",{key:e,class:"input"},[$(l("span",null,null,512),[[r,H[e]]]),l("div",xe,[y(he,{value:d.value[e][s.data.key]||0,min:s.data.minLevel,max:s.data.maxLevel,"onUpdate:value":p=>h(e,p)},null,8,["value","min","max","onUpdate:value"])])]))),128)),Be,(n(!0),u(_,null,C(Object.keys(c(o).output.plan[s.data.key]||{}),e=>{var p,m;return n(),u("li",{key:e,class:E({output:!0,"sub-chars":typeof((m=(p=c(o).output.plan)==null?void 0:p[s.data.key])==null?void 0:m[e])=="object"})},[l("b",null,v(c(o).format.key(e)),1),l("div",null,[(n(!0),u(_,null,C(Object.keys(d.value),i=>{var f,A,D,O;return n(),u("span",{key:i,class:E({...M(i,e),[c(Ie)(e)]:!0,"stats-style":i=="actually"?!M(i,e).none:!1})},[typeof((A=(f=c(o).output[i])==null?void 0:f[s.data.key])==null?void 0:A[e])=="object"?(n(),u("ul",Re,[(n(!0),u(_,null,C(Object.keys(c(o).output[i][s.data.key][e]||{}),S=>(n(),u("li",{key:S,class:"output"},[l("b",null,v(c(o).format.key(S)),1),l("div",null,[(n(!0),u(_,null,C(Object.keys(d.value),N=>{var P,j,x;return n(),u("span",{key:N,class:E(M(N,S))},v(c(o).format.value(S,(x=(j=(P=c(o).output[N])==null?void 0:P[s.data.key])==null?void 0:j[e])==null?void 0:x[S])),3)}),128))])]))),128))])):(n(),u(_,{key:1},[ve(v(c(o).format.value(e,(O=(D=c(o).output[i])==null?void 0:D[s.data.key])==null?void 0:O[e])),1)],64))],2)}),128))])],2)}),128))])])]),_:1},16,["open"]),y(w,{open:I.value,"onUpdate:open":a[4]||(a[4]=e=>I.value=e),size:c(B).SMALL,title:t.$t("HS_COMPENDIUM")},{body:R(()=>[l("div",we,[$(l("p",$e,null,512),[[r,"SYNC"]]),l("select",{value:t.$store.state.userSettings.compendiumTechSyncConfigIndex,onChange:a[3]||(a[3]=e=>t.$store.commit(c(me).SET_COMPENDIUM_TECH_SYNC_CONFIG_INDEX,parseInt(e.target.value)))},[(n(!0),u(_,null,C(c(o).Config.configs,(e,p)=>(n(),u("option",{key:p,value:p},v(e.name),9,qe))),128))],40,Ve)])]),_:1},8,["open","size","title"])])}}}),st=Ce(ze,[["__scopeId","data-v-fb8b76f1"]]);export{st as default};
