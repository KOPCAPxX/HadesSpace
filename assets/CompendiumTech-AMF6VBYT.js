import{d as P,g as V,i as w,j as H,S as q,k as z,r as G,o as K,c as X,h as v,e as r,f as n,t as f,u,H as Y,w as Z,m as F,M as J,l as A,n as h,I as _,p as Q,q as W,_ as ee}from"./index-SZ5e6eL8.js";import{c as te}from"./compendiumTechList-plEbcs0u.js";import{C as ae}from"./CompendiumPage-5HJdaPYL.js";import{T as ne}from"./TechList-_tIVAQRX.js";import{N as se}from"./NumberPicker-mjIx89M9.js";import{g as le}from"./globals-zpsYnYkF.js";import{s as I}from"./capital_ships-ioQeNDqF.js";import{a as oe}from"./alliance_levels-o1qIIhIq.js";import{s as O}from"./spacebuildings-NmTc9Pj4.js";import{m as B}from"./ModulePage.vue_vue_type_script_setup_true_lang-sbwTKN3z.js";import"./Data-hOIApvy0.js";import"./sec2str-KGRUQNzn.js";import"./byTypes-1BYQ2hUk.js";import"./Page-I1N2-oAN.js";const ie=c=>(Q("data-v-d111b76e"),c=c(),W(),c),re={class:"container"},ce={class:"modal"},de={class:"title"},me=ie(()=>n("div",null,null,-1)),ue={class:"level-picker"},pe=P({__name:"CompendiumTech",setup(c){const g={RedStarScanner:O.RedStarScanner,ShipmentRelay:O.ShipmentRelay},T={Transport:I.Transport,Miner:I.Miner,Battleship:I.Battleship},{MaxModuleLevel:M}=le,D=Object.fromEntries([...Object.entries(g).map(([e,t])=>[e,t.Cost.length]),...Object.entries(T).map(([e,t])=>[e,t.BuildCost.length]),...Object.keys(B).map(e=>[e,M]),["AllianceLevel",oe.XPRequired.length]]),b=Object.fromEntries([...Object.keys(g).map(e=>[e,0]),...Object.keys(T).map(e=>[e,0]),...Object.entries(B).map(([e,t])=>[e,j(t)]),["AllianceLevel",0]]),{data:l,levelMap:N,setTechLevel:y}=te(),{t:o}=V(),C=o("HS_COMPENDIUM"),d=w(!1),a=H({size:q.SMALL,title:o("TECHNOLOGIES"),data:{value:{},maxLevel:0,minLevel:0,lastAgoUpdate:0,get key(){return this.value.Name}}}),E=setInterval(p,5e3);z(()=>{clearTimeout(E)});function k(e){l.value&&(a.data.value=e,a.data.maxLevel=D[e.Name],a.data.minLevel=b[e.Name],d.value=!0,p())}function x(e){var t;return!((t=m(e))!=null&&t.level)}function R(e){const t=A(a.data.key);return l.value[t]||(l.value[t]={level:0}),a.data.minLevel!=0&&e==a.data.minLevel&&l.value[t].level!=0&&(e=0),l.value[t].level!=e&&(l.value[t].level=e,y(t,e),p()),e}function j(e){let t=1;for(const[,s]of Object.entries(e))Array.isArray(s)&&s.length>t&&(t=s.length);return M-t+1}function m(e){var t;return((t=l.value)==null?void 0:t[A(e)])||null}function U(){var t;const e=a.data.value;if(e.Icon)return h(_,{name:e.Icon,dir:e.specialIcon?"icons":"game/Modules"});if(e.Model)return h(_,{name:e.Model[((t=m(e.Name))==null?void 0:t.level)-1||5],dir:"game/Ships"});if(e.PrefabModel)return h(_,{name:e.PrefabModel,dir:"game/SpaceBuildings"})}function p(){var e;if(d.value){const t=(e=m(a.data.key))==null?void 0:e.ts;t&&(a.data.lastAgoUpdate=(new Date().getTime()-t)/1e3)}}function $(e){const t=[],s=Math.trunc(e/86400),i=Math.trunc(e%86400/3600),L=Math.trunc(e%3600/60),S=Math.trunc(e%60);return s!=0&&t.push(`${s}${o("TID_DAY_ABBREVIATION")}`),i!=0&&t.push(`${i}${o("TID_HOUR_ABBREVIATION")}`),L!=0&&t.push(`${L}${o("TID_MINUTE_ABBREVIATION")}`),S!=0&&t.push(`${S}${o("TID_SECOND_ABBREVIATION")}`),t.slice(0,2).join(" ")}return(e,t)=>{const s=G("t");return K(),X(ae,null,{default:v(()=>[r(u(Y),null,{default:v(()=>[n("title",null,f(u(C)),1)]),_:1}),n("div",null,[n("div",re,[r(ne,{"on-click":k,"is-muted":x,"level-map":u(N)},null,8,["level-map"])]),r(J,F({open:d.value,"onUpdate:open":t[0]||(t[0]=i=>d.value=i)},a),{body:v(()=>{var i;return[n("div",ce,[n("div",de,[n("div",null,[n("h2",null,f(e.$t(a.data.value.TID)),1),n("p",null,f(u(o)("TID_SOCIAL_TIMESTAMP",[$(a.data.lastAgoUpdate)])),1),me]),r(U)]),Z(n("span",null,null,512),[[s,"CURRENT_LVL"]]),n("div",ue,[r(se,{value:((i=m(a.data.key))==null?void 0:i.level)||0,min:a.data.minLevel,max:a.data.maxLevel,"onUpdate:value":R},null,8,["value","min","max"])])])]}),_:1},16,["open"])])]),_:1})}}}),be=ee(pe,[["__scopeId","data-v-d111b76e"]]);export{be as default};
