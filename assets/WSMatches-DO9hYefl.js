import{a as j,s as z}from"./sec2str-CrO4QF0i.js";import{d as I,aN as R,aO as F,a as S,o as i,b as u,f as t,F as D,B as V,A as B,t as v,_ as E,i as h,r as C,w as k,K as N,aP as x,L as G,aG as J,J as T,e as y,h as H,aB as K,p as W,q,z as b,y as Y,u as P,N as O}from"./index-CLTzBDd6.js";const Q={class:"pagination"},X=["onClick"],A=2,Z=I({__name:"Pagination",props:R({maxPage:{}},{modelValue:{default:1,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const d=r,a=F(r,"modelValue",{set(s){return s<1&&(s=1),s>d.maxPage&&(s=d.maxPage),s}}),c=S(()=>{let s=Math.max(a.value-A,1),l=Math.min(a.value+A,d.maxPage);return l-s+1<5&&(s===1?l=Math.min(d.maxPage,s+4):l===d.maxPage&&(s=Math.max(1,l-4))),Array.from({length:l-s+1},(m,p)=>s+p)});return(s,l)=>(i(),u("ul",Q,[t("li",{class:"arrow prev",onClick:l[0]||(l[0]=m=>a.value=a.value-1)}),(i(!0),u(D,null,V(c.value,m=>(i(),u("li",{key:m,class:B({selected:m===s.$props.modelValue}),onClick:p=>a.value=m},v(m),11,X))),128)),t("li",{class:"arrow next",onClick:l[1]||(l[1]=m=>a.value=a.value+1)})]))}}),L=E(Z,[["__scopeId","data-v-2bf6673e"]]),ee=r=>(W("data-v-a8cdb687"),r=r(),q(),r),te={class:"label"},se={key:0},ae={key:1},le=ee(()=>t("div",{class:"arrow"},null,-1)),oe={key:0,class:"multiselect_list"},ne=["onClick"],ie=["checked"],ue={class:"label"},re=I({__name:"MultiSelect",props:R({options:{},displayField:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const d=r,a=F(r,"modelValue"),c=h(!1),s=h(),l=h(),m=S(()=>d.options.filter(e=>{var o,g;return(g=e[d.displayField])==null?void 0:g.toLowerCase().includes((o=l.value)==null?void 0:o.toLowerCase())}));function p(){var e;c.value=!c.value,c.value&&(l.value="",(e=s.value)==null||e.focus())}function f(e){a.value.includes(e)?a.value.splice(a.value.indexOf(e),1):a.value.push(e)}function w(){a.value=[]}return(e,o)=>{const g=C("t"),$=C("click-outside");return k((i(),u("div",{class:B(["multiselect",{__active:c.value}])},[N(e.$slots,"default",{selected:a.value,toggleDropdown:p},()=>[t("button",{class:"multiselect_btn",onClick:p},[k(t("input",{ref_key:"filterInput",ref:s,"onUpdate:modelValue":o[0]||(o[0]=_=>l.value=_),type:"text",onClick:o[1]||(o[1]=x(()=>{},["stop"]))},null,512),[[G,l.value]]),k(t("div",te,[N(e.$slots,"label",{},()=>[a.value.length?(i(),u("p",se,v(e.$t("SELECTED",[a.value.length])),1)):k((i(),u("p",ae,null,512)),[[g,"SELECT"]])],!0)],512),[[J,!c.value]]),c.value?T("",!0):(i(),u("div",{key:0,class:"clear",onClick:x(w,["stop"])})),le])],!0),y(K,{name:"list"},{default:H(()=>[c.value?(i(),u("ul",oe,[(i(!0),u(D,null,V(m.value,(_,n)=>(i(),u("li",{key:n,onClick:$e=>f(_)},[t("input",{type:"checkbox",checked:e.$props.modelValue.includes(_)},null,8,ie),t("span",ue,v(_[e.$props.displayField]),1)],8,ne))),128))])):T("",!0)]),_:1})],2)),[[$,()=>c.value=!1]])}}}),de=E(re,[["__scopeId","data-v-a8cdb687"]]),M=r=>(W("data-v-a928692f"),r=r(),q(),r),ce={class:"filters"},pe={class:"label"},me={class:"list"},ve={class:"corp-names"},_e=M(()=>t("span",{class:"vs-icon"},null,-1)),fe={class:"score"},he=M(()=>t("span",null," - ",-1)),ge={key:0},Pe={key:1},ke=M(()=>t("div",{class:"footer"},[t("div",{class:"content"},[t("p",null,[O("Powered by "),t("a",{href:"https://compendium.mentalisit.myds.me/ws/",target:"_blank"},"compendium.mentalisit.myds.me"),O(" API ")])])],-1)),U="https://compendium.mentalisit.myds.me/ws/",we=I({__name:"WSMatches",setup(r){const d=new URL("matches",U),a=new URL("corps",U),c=new Date,s=h(),l=h([]),m=S(()=>{var e;return(((e=s.value)==null?void 0:e.matches)||[]).map(o=>({...o,DateEnded:new Date(o.DateEnded)}))}),p=h(1),f=h([]);d.searchParams.set("limit","50"),b(p,()=>{window.scrollTo({top:0,behavior:"smooth"}),d.searchParams.set("page",p.value.toString()),w()},{immediate:!0}),b(f,()=>{f.value.length==0?d.searchParams.delete("filter"):d.searchParams.set("filter",JSON.stringify({corp:f.value})),p.value=1,w()},{deep:!0}),Y(async()=>{l.value=await fetch(a).then(e=>e.json()).then(e=>e.matches)});async function w(){s.value=await fetch(d).then(e=>e.json())}return(e,o)=>{var $,_;const g=C("t");return i(),u("div",null,[t("div",ce,[t("div",null,[k(t("p",pe,null,512),[[g,"TID_OTHER_PLAYER_INFO_PAGE_CORP_SECTION"]]),y(de,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=n=>f.value=n),options:l.value,"display-field":"Name"},null,8,["modelValue","options"])])]),y(L,{modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=n=>p.value=n),"max-page":(($=s.value)==null?void 0:$.MaxPage)||1},null,8,["modelValue","max-page"]),t("ul",me,[(i(!0),u(D,null,V(m.value,n=>(i(),u("li",{key:n.MatchId},[t("div",null,[t("p",ve,[t("span",null,v(n.Corporation1Name),1),_e,t("span",null,v(n.Corporation2Name),1)]),t("p",fe,[t("span",null,v(n.Corporation1Score),1),he,t("span",null,v(n.Corporation2Score),1)]),n.DateEnded-P(c)>0?(i(),u("p",ge,[t("span",null,v(e.$t("TID_WS_PREPARATION_ENDS_IN",[P(j)((n.DateEnded-P(c))/1e3)])),1)])):(i(),u("p",Pe,[t("span",null,v(e.$t("TID_WS_ENDED"))+" "+v(`(${e.$t("TID_SOCIAL_TIMESTAMP",[P(z)((P(c)-n.DateEnded)/1e3)])})`),1)]))])]))),128))]),y(L,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=n=>p.value=n),"max-page":((_=s.value)==null?void 0:_.MaxPage)||1},null,8,["modelValue","max-page"]),ke])}}}),Ie=E(we,[["__scopeId","data-v-a928692f"]]);export{Ie as default};
