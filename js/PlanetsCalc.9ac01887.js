(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PlanetsCalc"],{"25e3":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("h1",{attrs:{id:"title"}},[t._v(t._s(t.title))]),e("table",{staticClass:"planetsCalc"},[t._l(t.output.calculated,(function(a,n){return e("tr",{key:n},[e("td",[t._v(t._s(t.getFormatKey(n)))]),t._l(a,(function(a,l){return e("td",{key:n+l,class:t.outputClassesTable(l,n)},[t._v(" "+t._s(a.toLocaleString())+" ")])}))],2)})),t._l(t.output.total,(function(a,n){return e("tr",{key:n,staticClass:"total"},[e("td",[t._v(t._s(t.$t(n)))]),e("td",{attrs:{colspan:"3"}},[t._v(" "+t._s(t.getFormatValue(n,a))+" ")])])}))],2),e("div",{staticClass:"btns-warp"},[e("div",{staticClass:"btns-reset"},[e("button",{attrs:{name:"plan"},on:{click:t.reset}},[t._v(" "+t._s(t.$t("resetPlan"))+" ")]),e("button",{staticClass:"resetButtonAll",attrs:{name:"all"},on:{click:t.reset}},[t._v(" "+t._s(t.$t("resetAll"))+" ")])])]),t.allDataLoaded?e("v-table",{attrs:{"obj-name":"planetsCalc",head:t.input.static.head,body:t.input.static.body,"max-level":t.input.static.maxLevel,"lvl-col-key":"â„–","merge-cells":!1},scopedSlots:t._u([{key:"head",fn:function(){return[e("th",[t._v(t._s(t.$t("lvl")))]),e("th",[t._v(t._s(t.$t("plan")))])]},proxy:!0},{key:"body",fn:function(a){var n=a.level;return t._l(["actually","plan"],(function(a){return e("td",{key:a},[e("select",{on:{change:function(e){return t.changeLvl(a,t.input.keys[n],e.target.value)}}},t._l(t.input.maxUpgradeLevel[n]+1,(function(l,s){return e("option",{key:a+l,attrs:{disabled:t.isDisabled(a,n,s)},domProps:{selected:t.isSelected(a,n,s)}},[t._v(" "+t._s(s)+" ")])})),0)])}))}}],null,!1,521098142)}):t._e()],1)},l=[],s=e("5df5"),i=(e("d919"),e("f011"),e("a097"),e("be65"),e("3a61"),e("8ec4"),e("1eb6"),e("e0c3"),e("2d72"),e("97a5")),r=e("dc33"),o=e("a3ce"),u="planetsCalc",c=["CreditStorage","FuelStorage","CreditsPerHour","FuelPerHour","ShipmentsCRValuePerDay"],d=["CreditStorageModifier","FuelStorageModifier","CreditIncomeModifier","FuelIncomeModifier","CreditShipmentModifier"],p=["Cost","TimeToUpgrade"],h=["actually","plan","result"],f={ShipmentsCRValuePerDay:"TotalShipmentCRPerDay",Cost:"Cost",TimeToUpgrade:"ConstructionTime"},g={components:{VTable:o["a"]},data:function(){return{title:this.$t("planetscalc"),input:{static:{head:[],body:[],maxLevel:0},keys:[],maxUpgradeLevel:[]},output:{calculated:{},total:{}},data:{planets:{},levels:{},tradingStations:{}},storage:{actually:{},plan:{}},allDataLoaded:!1}},metaInfo:function(){return{title:this.title}},mounted:function(){if(localStorage.getItem(u))try{this.storage=JSON.parse(localStorage.getItem(u))}catch(t){localStorage.removeItem(u)}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;Promise.all([e.e("data-planets").then(e.bind(null,"5d84")),e.e("data-planet_levels").then(e.bind(null,"f23a")),e.e("data-spacebuildings").then(e.bind(null,"4918"))]).then((function(a){var e=Object(s["a"])(a,3),n=e[0],l=e[1],i=e[2];t.data.planets=n.data.yellowstarTable,t.data.levels=l.data,t.data.tradingStations=i.data.TradingStation})).then(this.generateInputTable).then(this.updateOutput).then((function(){return t.allDataLoaded=!0})).catch(console.error)},createCells:function(){var t=this;c.forEach((function(a){var e={};h.forEach((function(t){return e[t]=0})),t.$set(t.output.calculated,a,e)})),p.forEach((function(a){t.$set(t.output.total,a,0)}))},generateInputTable:function(){for(var t={Name:this.data.planets.Name,MaxUpgradeLevel:this.data.planets.MaxUpgradeLevel,TID:this.data.planets.TID,maxLevel:this.data.planets.maxLevel},a=0;this.data.tradingStations.MaxOnOwnSolarSystem>a;a++)t.Name.push(this.data.tradingStations.Name+"_"+a),t.MaxUpgradeLevel.push(this.data.tradingStations.maxLevel),t.TID.push(this.data.tradingStations.TID),t.maxLevel++;this.input.keys=t.Name,this.input.maxUpgradeLevel=t.MaxUpgradeLevel,this.input.static.head.push("TID"),this.input.static.body.push(t.TID),this.input.static.maxLevel=t.maxLevel},getFormatKey:function(){for(var t=this,a=function(a){return t.$t.call(t,a)},e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return i["a"].apply(void 0,[a,this.objName].concat(n))},getFormatValue:function(){for(var t=this,a=function(a){return t.$t.call(t,a)},e=function(a){return t.$te.call(t,a)},n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return r["a"].apply(void 0,[a,e,null].concat(l))},isSelected:function(t,a,e){var n=this.input.keys[a],l=this.storage.plan[n]||0,s=this.storage.actually[n];return s>l&&(l=this.changeLvl("plan",n,s)),"plan"==t?e==l:this.storage[t][n]==e},isDisabled:function(t,a,e){var n=this.input.keys[a];if("plan"==t&&this.storage.actually)return e<this.storage.actually[n]},reset:function(t){var a=this;if("all"==t.target.name){var e=confirm("Reset all? Ar u serious ?");if(!e)return;this.storage={actually:{},plan:{}}}else this.storage.plan?Object.keys(this.storage.plan).forEach((function(t){a.storage.plan[t]=a.storage.actually[t]})):this.storage.plan={};this.updateOutput()},changeLvl:function(t,a,e){return e=parseInt(e),this.$set(this.storage[t],a,parseInt(e)),this.updateOutput(),e},updateStorage:function(){localStorage.setItem(u,JSON.stringify(this.storage))},updateOutput:function(){var t=this,a=this.output.calculated,e=this.output.total,n=this.input.keys,l=this.data.planets,s=this.data.levels,i=this.data.tradingStations;function r(t,e){Object.keys(e).forEach((function(r){var o=e[r]-1,u=n.indexOf(r);e[r]&&Object.keys(a).forEach((function(e,n){var c,p;"result"==t?(c=a[e].plan,p=a[e].actually):(c=a[e][t]||0,d[n]?(p=s[e][o]*l[d[n]][u]/100,r.includes("TradingStation")&&(p=0,e in f&&(p=i[f[e]][o]))):p=s[e][o]),a[e][t]=c+p}))}))}function o(t){Object.keys(t.plan).forEach((function(a){0!=t.plan[a]&&Object.keys(e).forEach((function(n){var l=0,r=0,o=t.plan[a]-1,u=(t.actually[a]||0)-1;l=void 0==e[n]?0:e[n];for(var c=u;o>c;c++){var d=s[n][c+1]||0;a.includes("TradingStation")&&n in f&&(d=i[f[n]][c+1]||0),r+=d}e[n]=l+r}))}))}this.createCells(),this.updateStorage(),Object.keys(this.storage).forEach((function(a){Object.keys(t.storage[a]).length&&r(a,t.storage[a])})),Object.keys(a).forEach((function(t){a[t].plan=a[t].plan-a[t].actually})),r("result",this.storage.plan),o(this.storage)},outputClassesTable:function(t,a){if("plan"==t)return{"plan-plus":this.output.calculated[a].plan,hide:0==this.output.calculated[a].plan};if("result"==t){var e=this.output.calculated[a].actually<this.output.calculated[a].result,n=!this.output.total[Object.keys(this.output.total)[0]];return{"result-growth":e,"result-not-growth":!e,hide:n}}}}},v=g,y=(e("2f1a"),e("6ffd")),m=Object(y["a"])(v,n,l,!1,null,"1f447e83",null);a["default"]=m.exports},"2f1a":function(t,a,e){"use strict";e("5bac")},"5bac":function(t,a,e){}}]);