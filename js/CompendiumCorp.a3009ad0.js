"use strict";(self["webpackChunkhades_space"]=self["webpackChunkhades_space"]||[]).push([[934],{90942:(e,a,l)=>{l.r(a),l.d(a,{default:()=>N});var n=l(66252),t=l(2262),i=l(3577),c=l(37610),o=l(70131),r=l(57823),s=l(95893),u=l(77451),m=l(50930),d=l(31755),v=l(2824),p=l(11361),_=l(11815),h=l(45715),f=l(51131),g=l(20128),C=l(78642),k=l(91489);const w={class:"container"},Z={class:"select"},y=["value","selected"],b=["onClick"],T={class:"meta"},U={class:"avatar"},I=["src","alt"],S={class:"sort-tech"},z=["k"],E={class:"modal-filter-tech"},H={class:"sections-group other"},D={class:"type",name:"user-info"},P=["onClick"],A=5,L=50,M=(0,n.aZ)({__name:"CompendiumCorp",setup(e){const{t:a}=(0,o.QT)(),l=a("HS_COMPENDIUM"),{hourCycles:M}=new Intl.Locale(navigator.language),W=!M||["h23","h24"].some((e=>M.includes(e))),X={LocalTime:{icon:{name:"time",dir:"icons/compendium"},check:e=>e.timeZone,formatter:({localTime:e,localTime24:a})=>W?a:e},AfkFor:{icon:{name:"afk",dir:"icons/compendium"},check:e=>e.afkFor,formatter:({afkFor:e})=>e},CargoCap:{icon:{name:"cargo",dir:"icons/compendium"},check:({tech:e})=>e[(0,c.mX)("Transport")]?.[0]&&e[(0,c.mX)("TransportCapacity")]?.[0],formatter:({tech:e})=>{const[a]=e[(0,c.mX)("Transport")],[l]=e[(0,c.mX)("TransportCapacity")];return a&&l?h.Z.Transport.JobCapacity[a]+g.Z.TransportCapacity.ExtraTradeSlots[l]:0}}},N=(0,t.iH)(!1),Y=(0,t.iH)(!1),F=(0,t.iH)(!1),O=(0,t.iH)(""),R=(0,t.qj)([]),K=(0,t.iH)({}),j=(0,t.iH)([]),q=(0,t.qj)({title:"",lvlMap:void 0});let x=[];async function B(){N.value=!0;const e=await s.ZP.corpdata();K.value=e,x=e.members,j.value=e.members.slice(0,L),N.value=!1}async function G(e){J(e.Name)?R.splice(R.indexOf(e.Name),1):R.push(e.Name)}function J(e){return R.includes(e)}function Q(e){x.length&&(q.title=e.name,q.lvlMap=(0,C.Z)(e.tech,{map:([e,a])=>[(0,k.pc)(e),a[0]]}),F.value=!0)}function $(e){j.value=x.filter((a=>e.every((e=>a.tech[(0,c.mX)(e)]?.[0]||X[e]?.check(a))))).sort(((a,l)=>e.length&&!(e[0]in X)?l.tech[(0,c.mX)(e[0])][0]-a.tech[(0,c.mX)(e[0])][0]:"CargoCap"==e[0]?X.CargoCap.formatter(l)-X.CargoCap.formatter(a):0)).slice(0,L)}function V(e){if(!R.length)return{};const a={},l=Object.fromEntries(R.map((a=>a in X?[a,X[a].formatter(e)]:[a,e.tech[(0,c.mX)(a)][0]])).sort((([,e],[,a])=>a-e)).slice(0,A));for(const n in l){const e=a[n]={icon:{dir:"",name:""},level:l[n]};n in g.Z?(e.icon.dir="game/Modules",e.icon.name=g.Z[n].Icon):n in h.Z?(e.icon.dir="game/Ships",e.icon.name=h.Z[n].Model[5]):n in X?e.icon=X[n].icon:(e.icon.dir="game/SpaceBuildings",e.icon.name=f.Z[n].PrefabModel)}return a}return j.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),s.ZP.on("connected",(()=>B())),s.ZP.on("disconnected",(()=>{x=[],j.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),O.value="",R.splice(0)})),(0,n.bv)((()=>{s.ZP.getUser()&&B()})),(0,n.YP)(O,(async e=>{N.value=!0,x=await s.ZP.corpdata(e).then((e=>e.members)),j.value=x,N.value=!1,$(R)})),(0,n.YP)((()=>R),$,{deep:!0}),(e,a)=>{const c=(0,n.Q2)("t");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,t.SU)(u.Fb),null,{default:(0,n.w5)((()=>[(0,n._)("title",null,(0,i.zw)((0,t.SU)(l)),1)])),_:1}),(0,n.Wm)(p.Z,null,{default:(0,n.w5)((()=>[(0,n._)("div",w,[(0,n._)("div",{class:(0,i.C_)(["filter",{disable:j.value.length>(0,t.SU)(x).length}])},[(0,n._)("div",null,[(0,n.wy)((0,n._)("button",{class:"btn-tech-filter",onClick:a[0]||(a[0]=e=>Y.value=!0)},null,512),[[c,"FILTER"]])]),(0,n._)("div",Z,[(0,n._)("select",{onChange:a[1]||(a[1]=e=>O.value=e.target.value)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(K.value.roles,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.id,value:e.id,selected:O.value==e.id},(0,i.zw)(e.name),9,y)))),128))],32)])],2),(0,n._)("ul",{class:(0,i.C_)(["members-list",{"animated-fetch":N.value}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(j.value,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.userId,class:"member",onClick:a=>Q(e)},[(0,n._)("div",T,[(0,n._)("div",U,[(0,n._)("img",{src:(0,t.SU)(r.g)(e.userId,e.avatar),alt:`${e.name} avatar`,onError:a[2]||(a[2]=e=>e.target.src=(0,t.SU)(_))},null,40,I)]),(0,n._)("p",null,(0,i.zw)(e.name),1)]),(0,n._)("div",S,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(V(e),((e,a)=>((0,n.wg)(),(0,n.iD)("li",{key:a},[(0,n._)("div",null,[(0,n.Wm)(d.Z,{name:e.icon.name,dir:e.icon.dir},null,8,["name","dir"]),(0,n._)("span",{k:a,class:"level"},(0,i.zw)(e.level),9,z)])])))),128))])])],8,b)))),128))],2)])])),_:1}),(0,n.Wm)(m.Z,{open:Y.value,"onUpdate:open":a[4]||(a[4]=e=>Y.value=e),title:"Code",size:(0,t.SU)(m.z).LARGE},{body:(0,n.w5)((()=>[(0,n._)("div",E,[(0,n._)("button",{class:"button accent",onClick:a[3]||(a[3]=e=>R.splice(0))},(0,i.zw)(e.$t("RESET_ALL")),1),(0,n._)("div",H,[(0,n._)("section",D,[(0,n.wy)((0,n._)("h3",null,null,512),[[c,"TID_OBJECT_ACTION_PLAYER_INFO"]]),(0,n._)("ul",null,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(X,(({icon:e},a)=>(0,n._)("li",{key:a,class:"item"},[(0,n._)("div",{class:(0,i.C_)({mute:J(a)}),onClick:()=>G({Name:a})},[(0,n.Wm)(d.Z,{name:e.name,dir:e.dir},null,8,["name","dir"])],10,P)]))),64))])])]),(0,n.Wm)(v.Z,{"on-click":G,"is-muted":J})])])),_:1},8,["open","size"]),(0,n.Wm)(m.Z,{open:F.value,"onUpdate:open":a[5]||(a[5]=e=>F.value=e),title:q.title,size:(0,t.SU)(m.z).LARGE},{body:(0,n.w5)((()=>[(0,n.Wm)(v.Z,{"level-map":q.lvlMap},null,8,["level-map"])])),_:1},8,["open","title","size"])])}}});var W=l(83744);const X=(0,W.Z)(M,[["__scopeId","data-v-35cd8752"]]),N=X}}]);