"use strict";(self["webpackChunkhades_space"]=self["webpackChunkhades_space"]||[]).push([[189],{6908:(t,e,n)=>{n.d(e,{Z:()=>l});var i=n(2262),s=n(553),o=n(4970);function l(t,e){const n=(0,i.qj)({actually:{},plan:{},total:{intermediate:{},result:{}}}),l={};for(const i of t)n.total.result[i]=0;const u=e(l,n);return{provideGetterElements:r,output:n,update:c};function r(t){return t(y,l)}function c(e,i){const s=(t,n,...i)=>p((([i],s,o)=>f(Object.fromEntries(o),i,e.actually[t],n)),t,...i),o=(t,e,...n)=>p((([,t])=>Array.isArray(t)?t[e-1]:t),t,...n);i?(h(n.plan,i,((...t)=>s(i,e.plan[i],...t))),h(n.actually,i,((...t)=>o(i,e.actually[i],...t)))):(d(e.plan,n.plan,s),d(e.actually,n.actually,o)),m(n.total);for(const[l,a]of Object.entries(n.plan))if(Object.keys(a).length){for(const e of t)n.total.result[e]+=a[e];u(l,e)}}function p(t,e,...n){const[[i]]=n;if(a(l[e][i])){const n=(0,s.Z)(l[e][i],{map:(...e)=>[e[0][0],t(...e)]});return[i,n]}return[i,t(...n)]}function h(t,e,n){t[e]=(0,s.Z)(l[e],{map:n})}function d(t,e,n){if(Object.keys(t).length)for(const[i,s]of Object.entries(t))s?h(e,i,((...t)=>n(i,s,...t))):e[i]={};else for(const i of Object.keys(e))delete e[i]}function f(e,n,i,s){const o=e[n],l=i>0?o[i-1]:0;let a=o[s-1];if(!Array.isArray(o))return!i&&s?o:0;if(t.includes(n)){a=0;let t=i>0?i-1:0;while(t<=s-1)a+=o[t],t++}return a-l}function m(t){for(const e in t)if(e in t){if(a(t[e])){m(t[e]);continue}t[e]=0}}function y(e,n){const i=(0,o.K)(e);return s(i),i;function s(e){for(const i in e)if(i in e){const s=e[i],o="boolean"==typeof s[1]?s[0]:s;if(a(o)){const t=y(o,n);Object.keys(t).length?e[i]=t:delete e[i];continue}if((!Array.isArray(o)||o.length!=n)&&!t.includes(i)){delete e[i];continue}"boolean"==typeof s[1]&&(e[i]=o)}return e}}}function a(t){return"object"===typeof t&&!Array.isArray(t)&&null!==t}},4201:(t,e,n)=>{n.d(e,{Z:()=>O});var i=n(6252),s=n(3577);const o={class:"topic"},l={class:"total-table"},a={key:0,colspan:"3"},u={class:"reset-buttons"};function r(t,e,n,r,c,p){const h=(0,i.up)("Head"),d=(0,i.up)("confirm");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i._)("title",null,(0,s.zw)(t.title),1)])),_:1}),(0,i._)("h1",o,(0,s.zw)(t.title),1),(0,i._)("table",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.output.total.intermediate,((e,n)=>((0,i.wg)(),(0,i.iD)("tr",{key:n},[(0,i._)("td",null,(0,s.zw)(t.format.key(n)),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e,((e,o)=>((0,i.wg)(),(0,i.iD)("td",{key:n+o,class:(0,s.C_)(t.totalTableClasses(o,n))},(0,s.zw)(e.toLocaleString("ru-RU")),3)))),128))])))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.output.total.result,((e,n)=>((0,i.wg)(),(0,i.iD)("tr",{key:n,class:"result"},[(0,i._)("td",null,(0,s.zw)(t.format.key(n)),1),e>0?((0,i.wg)(),(0,i.iD)("td",a,[(0,i._)("b",null,(0,s.zw)(t.format.value(n,e)),1)])):(0,i.kq)("",!0)])))),128))]),(0,i._)("div",u,[(0,i._)("button",{name:"plan",onClick:e[0]||(e[0]=(...e)=>t.onReset&&t.onReset(...e))},(0,s.zw)(t.$t("RESET_PLAN")),1),(0,i._)("button",{name:"all",onClick:e[1]||(e[1]=(...e)=>t.onReset&&t.onReset(...e))},(0,s.zw)(t.$t("RESET_ALL")),1)]),(0,i.Wm)(d,{text:"Reset all ? Are you serious ?",onSetShow:t.setShowConfirm},null,8,["onSetShow"])])}var c=n(1232),p=n(9963);const h={class:"wrap"},d={key:0,class:"container"},f={class:"buttons"};function m(t,e,n,o,l,a){const u=(0,i.up)("modal"),r=(0,i.Q2)("t");return(0,i.wg)(),(0,i.j4)(u,{title:"Confirm",open:t.show,"onUpdate:open":t.modalUpdate},{default:(0,i.w5)((()=>[(0,i.Wm)(p.uT,null,{default:(0,i.w5)((()=>[(0,i._)("div",h,[t.show?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Uk)((0,s.zw)(t.text)+" ",1),(0,i._)("div",f,[(0,i.wy)((0,i._)("button",{onClick:e[0]||(e[0]=e=>t.close(t.confirm))},null,512),[[r,"TID_OK"]]),(0,i.wy)((0,i._)("button",{onClick:e[1]||(e[1]=e=>t.close(t.defeat))},null,512),[[r,"TID_CANCEL"]])])])):(0,i.kq)("",!0)])])),_:1})])),_:1},8,["open","onUpdate:open"])}var y=n(4057);const w=(0,i.aZ)({name:"Confirm",components:{Modal:y.Z},props:{text:{type:String,default:void 0}},emits:["setShow"],data(){return{show:!1,confirm:()=>null,defeat:()=>null}},created(){this.$emit("setShow",this.open.bind(this))},methods:{modalUpdate(){this.close(this.defeat)},open(){return this.show=!0,new Promise(((t,e)=>{this.confirm=t,this.defeat=e}))},close(t){t(),this.show=!1,this.confirm=()=>null,this.defeat=()=>null}}});var g=n(3744);const b=(0,g.Z)(w,[["render",m],["__scopeId","data-v-dedcd4fc"]]),S=b;var _=n(3322),k=n(9114);const C=(0,i.aZ)({name:"Calculator",components:{Head:c.Fb,Confirm:S},props:{titleKey:{type:String,required:!0},input:{type:Object,required:!0},output:{type:Object,required:!0},localStorageKey:{type:String,required:!0},updateOutput:{type:Function,required:!0}},emits:["update:input","setup"],data(){return{resetConfirm:()=>new Promise((()=>null)),format:{key:t=>(0,k.Z)(t,this.$route.name),value:(t,e)=>(0,_.Z)(t,e,null)}}},computed:{title(){return this.$t(this.titleKey)}},created(){localStorage.getItem(this.localStorageKey)&&this.$emit("update:input",JSON.parse(localStorage.getItem(this.localStorageKey)||"{}")),this.$emit("setup",{onChangeLvl:this.onChangeLvl,isSelected:this.isSelected,isDisabled:this.isDisabled})},mounted(){this.updateOutput(this.input)},methods:{setShowConfirm(t){this.resetConfirm=t},async onReset(t){const e={};if("all"==t.target.name)await this.resetConfirm().then((()=>{for(const t in this.input)t in this.input&&(e[t]={});this.$emit("update:input",e)})).catch((()=>{}));else{if(e.plan={},this.input.plan)for(const t in this.input.plan)t in this.input.plan&&(e.plan[t]=this.input.actually[t]);this.$emit("update:input",{...this.input,...e})}this.$nextTick((()=>{this.updateOutput(this.input),this.updateStorage()}))},onChangeLvl(t,e,n){return n="string"===typeof n?parseInt(n):n,0==n?(delete this.input[t][e],delete this.output[t][e]):this.$emit("update:input",{...this.input,[t]:{...this.input[t],[e]:n}}),this.$nextTick((()=>{this.updateOutput(this.input,e),this.updateStorage()})),n},isSelected(t,e,n){let i=this.input.plan[e]||0;const s=this.input.actually[e];return s>i&&(i=this.onChangeLvl("plan",e,s)),"plan"==t?n==i:this.input[t][e]==n},isDisabled(t,e,n){return!("plan"!=t||!this.input.actually)&&n<this.input.actually[e]},updateStorage(){localStorage.setItem(this.localStorageKey,JSON.stringify(this.input))},totalTableClasses(t,e){const n=this.output.total.intermediate[e];if("plan"==t)return{"plan plus":n.plan,hide:0==n.plan};if("sum"==t){const t=n.sum>n.actually;return{"result-growth":t,"result-not-growth":!t,hide:0==n.sum}}return{}}}}),v=(0,g.Z)(C,[["render",r],["__scopeId","data-v-7f509a9e"]]),O=v}}]);