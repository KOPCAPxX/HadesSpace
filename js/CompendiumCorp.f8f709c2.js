"use strict";(self["webpackChunkhades_space"]=self["webpackChunkhades_space"]||[]).push([[934],{15311:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Y});var n=l(66252),t=l(2262),i=l(3577),o=l(37610),c=l(49152),s=l(70131),r=l(57823),u=l(95893),m=l(31303),d=l(77451),p=l(50930),v=l(74428),_=l(2824),g=l(72688),C=l(11815),f=l(45715),h=l(51131),Z=l(20128),w=l(78642),k=l(91489);const b={class:"container"},y={class:"select"},I=["value","selected"],S=["onClick"],T={class:"meta"},E={class:"avatar"},U=["src","alt"],D={class:"sort-tech"},L=["k"],P={class:"modal-filter-tech"},M={class:"sections-group other"},O={class:"type",name:"user-info"},z=["onClick"],H=5,R=50,A=(0,n.aZ)({__name:"CompendiumCorp",setup(e){const{t:a}=(0,s.QT)(),l=a("HS_COMPENDIUM"),{hourCycles:A}=new Intl.Locale(navigator.language),N=!A||["h23","h24"].some((e=>A.includes(e))),W={LocalTime:{icon:{name:"time",dir:"icons/compendium"},formatter:({localTime:e,localTime24:a})=>N?a:e},AfkFor:{icon:{name:"afk",dir:"icons/compendium"},formatter:({afkFor:e})=>e},CargoCap:{icon:{name:"cargo",dir:"icons/compendium"},formatter:({tech:e})=>{const[a]=e[(0,o.mX)("Transport")]||[],[l]=e[(0,o.mX)("TransportCapacity")]||[];return a&&l?f.Z.Transport.JobCapacity[a]+Z.Z.TransportCapacity.ExtraTradeSlots[l]:0}}},Y=(0,t.iH)(!1),F=(0,t.iH)(!1),X=(0,t.iH)(!1),K=(0,t.iH)(c.Z.state.userSettings.compendiumCorpLastRoleId),j=(0,t.qj)([]),q=(0,t.iH)({}),x=(0,t.iH)([]),B=(0,t.qj)({title:"",lvlMap:void 0});let G=[];async function J(){Y.value=!0;const e=await u.ZP.corpdata(c.Z.state.userSettings.compendiumCorpLastRoleId);q.value=e,G=e.members,x.value=e.members.slice(0,R),Y.value=!1}async function Q(e){$(e.Name)?j.splice(j.indexOf(e.Name),1):j.push(e.Name)}function $(e){return j.includes(e)}function V(e){G.length&&(B.title=e.name,B.lvlMap=(0,w.Z)(e.tech,{map:([e,a])=>[(0,k.pc)(e),a[0]]}),X.value=!0)}function ee(e){x.value=G.sort(((a,l)=>e.length&&!(e[0]in W)?(l.tech[(0,o.mX)(e[0])]?.[0]||0)-(a.tech[(0,o.mX)(e[0])]?.[0]||0):"CargoCap"==e[0]?W.CargoCap.formatter(l)-W.CargoCap.formatter(a):0)).slice(0,R)}function ae(e){if(!j.length)return{};const a={},l=Object.fromEntries(j.map((a=>a in W?[a,W[a].formatter(e)]:[a,e.tech[(0,o.mX)(a)]?.[0]])).slice(-1*H));for(const n in l){const e=a[n]={icon:{dir:"",name:""},level:l[n]};n in Z.Z?(e.icon.dir="game/Modules",e.icon.name=Z.Z[n].Icon):n in f.Z?(e.icon.dir="game/Ships",e.icon.name=f.Z[n].Model[5]):n in W?e.icon=W[n].icon:(e.icon.dir="game/SpaceBuildings",e.icon.name=h.Z[n].PrefabModel)}return a}return x.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),u.ZP.on("connected",(()=>J())),u.ZP.on("disconnected",(()=>{G=[],x.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),K.value="",j.splice(0),c.Z.commit(m.Z.SET_COMPENDIUM_CORP_LAST_ROLE_ID)})),(0,n.bv)((()=>{u.ZP.getUser()&&J()})),(0,n.YP)(K,(async e=>{Y.value=!0,c.Z.commit(m.Z.SET_COMPENDIUM_CORP_LAST_ROLE_ID,e),G=await u.ZP.corpdata(e).then((e=>e.members)),x.value=G,Y.value=!1,ee(j)})),(0,n.YP)((()=>j),ee,{deep:!0}),(e,a)=>{const o=(0,n.Q2)("t");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,t.SU)(d.Fb),null,{default:(0,n.w5)((()=>[(0,n._)("title",null,(0,i.zw)((0,t.SU)(l)),1)])),_:1}),(0,n.Wm)(g.Z,null,{default:(0,n.w5)((()=>[(0,n._)("div",b,[(0,n._)("div",{class:(0,i.C_)(["filter",{disable:x.value.length>(0,t.SU)(G).length}])},[(0,n._)("div",null,[(0,n.wy)((0,n._)("button",{class:"btn-tech-filter",onClick:a[0]||(a[0]=e=>F.value=!0)},null,512),[[o,"FILTER"]])]),(0,n._)("div",y,[(0,n._)("select",{onChange:a[1]||(a[1]=e=>K.value=e.target.value)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(q.value.roles,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.id,value:e.id,selected:K.value==e.id},(0,i.zw)(e.name),9,I)))),128))],32)])],2),(0,n._)("ul",{class:(0,i.C_)(["members-list",{"animated-fetch":Y.value}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(x.value,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.userId,class:"member",onClick:a=>V(e)},[(0,n._)("div",T,[(0,n._)("div",E,[(0,n._)("img",{src:(0,t.SU)(r.g)(e.userId,e.avatar),alt:`${e.name} avatar`,onError:a[2]||(a[2]=e=>e.target.src=(0,t.SU)(C))},null,40,U)]),(0,n._)("p",null,(0,i.zw)(e.name),1)]),(0,n._)("div",D,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(ae(e),((e,a)=>((0,n.wg)(),(0,n.iD)("li",{key:a},[(0,n._)("div",null,[(0,n.Wm)(v.Z,{name:e.icon.name,dir:e.icon.dir},null,8,["name","dir"]),(0,n._)("span",{k:a,class:"level"},(0,i.zw)(e.level),9,L)])])))),128))])])],8,S)))),128))],2)])])),_:1}),(0,n.Wm)(p.Z,{open:F.value,"onUpdate:open":a[4]||(a[4]=e=>F.value=e),title:"Code",size:(0,t.SU)(p.z).LARGE},{body:(0,n.w5)((()=>[(0,n._)("div",P,[(0,n._)("button",{class:"button accent",onClick:a[3]||(a[3]=e=>j.splice(0))},(0,i.zw)(e.$t("RESET_ALL")),1),(0,n._)("div",M,[(0,n._)("section",O,[(0,n.wy)((0,n._)("h3",null,null,512),[[o,"TID_OBJECT_ACTION_PLAYER_INFO"]]),(0,n._)("ul",null,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(W,(({icon:e},a)=>(0,n._)("li",{key:a,class:"item"},[(0,n._)("div",{class:(0,i.C_)({mute:$(a)}),onClick:()=>Q({Name:a})},[(0,n.Wm)(v.Z,{name:e.name,dir:e.dir},null,8,["name","dir"])],10,z)]))),64))])])]),(0,n.Wm)(_.Z,{"on-click":Q,"is-muted":$})])])),_:1},8,["open","size"]),(0,n.Wm)(p.Z,{open:X.value,"onUpdate:open":a[5]||(a[5]=e=>X.value=e),title:B.title,size:(0,t.SU)(p.z).LARGE},{body:(0,n.w5)((()=>[(0,n.Wm)(_.Z,{"level-map":B.lvlMap},null,8,["level-map"])])),_:1},8,["open","title","size"])])}}});var N=l(83744);const W=(0,N.Z)(A,[["__scopeId","data-v-464fc524"]]),Y=W}}]);