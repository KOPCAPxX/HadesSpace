"use strict";(self["webpackChunkhades_space"]=self["webpackChunkhades_space"]||[]).push([[934],{83755:(e,a,l)=>{l.r(a),l.d(a,{default:()=>W});var n=l(66252),t=l(3577),i=l(2262),c=l(37610),o=l(57823),r=l(95893),s=l(50930),u=l(31755),m=l(2824),d=l(11361),v=l(11815),p=l(45715),_=l(51131),h=l(20128),g=l(78642),f=l(91489);const C={class:"container"},k={class:"select"},Z=["value","selected"],w=["onClick"],y={class:"meta"},b={class:"avatar"},T=["src","alt"],I={class:"sort-tech"},z=["k"],E={class:"modal-filter-tech"},H={class:"sections-group other"},U={class:"type",name:"user-info"},D=["onClick"],P=5,S=50,A=(0,n.aZ)({__name:"CompendiumCorp",setup(e){const{hourCycles:a}=new Intl.Locale(navigator.language),l=!a||["h23","h24"].some((e=>a.includes(e))),A={LocalTime:{icon:{name:"time",dir:"icons/compendium"},check:e=>e.timeZone,formatter:({localTime:e,localTime24:a})=>l?a:e},AfkFor:{icon:{name:"afk",dir:"icons/compendium"},check:e=>e.afkFor,formatter:({afkFor:e})=>e},CargoCap:{icon:{name:"cargo",dir:"icons/compendium"},check:({tech:e})=>e[(0,c.mX)("Transport")]?.[0]&&e[(0,c.mX)("TransportCapacity")]?.[0],formatter:({tech:e})=>{const[a]=e[(0,c.mX)("Transport")],[l]=e[(0,c.mX)("TransportCapacity")];return a&&l?p.Z.Transport.JobCapacity[a]+h.Z.TransportCapacity.ExtraTradeSlots[l]:0}}},L=(0,i.iH)(!1),X=(0,i.iH)(!1),W=(0,i.iH)(!1),Y=(0,i.iH)(""),M=(0,i.qj)([]),N=(0,i.iH)({}),F=(0,i.iH)([]),O=(0,i.qj)({title:"",lvlMap:void 0});let R=[];async function K(){L.value=!0;const e=await r.ZP.corpdata();N.value=e,R=e.members,F.value=e.members.slice(0,S),L.value=!1}async function j(e){q(e.Name)?M.splice(M.indexOf(e.Name),1):M.push(e.Name)}function q(e){return M.includes(e)}function x(e){R.length&&(O.title=e.name,O.lvlMap=(0,g.Z)(e.tech,{map:([e,a])=>[(0,f.pc)(e),a[0]]}),W.value=!0)}function B(e){F.value=R.filter((a=>e.every((e=>a.tech[(0,c.mX)(e)]?.[0]||A[e]?.check(a))))).sort(((a,l)=>e.length&&!(e[0]in A)?l.tech[(0,c.mX)(e[0])][0]-a.tech[(0,c.mX)(e[0])][0]:"CargoCap"==e[0]?A.CargoCap.formatter(l)-A.CargoCap.formatter(a):0)).slice(0,S)}function G(e){if(!M.length)return{};const a={},l=Object.fromEntries(M.map((a=>a in A?[a,A[a].formatter(e)]:[a,e.tech[(0,c.mX)(a)][0]])).sort((([,e],[,a])=>a-e)).slice(0,P));for(const n in l){const e=a[n]={icon:{dir:"",name:""},level:l[n]};n in h.Z?(e.icon.dir="game/Modules",e.icon.name=h.Z[n].Icon):n in p.Z?(e.icon.dir="game/Ships",e.icon.name=p.Z[n].Model[5]):n in A?e.icon=A[n].icon:(e.icon.dir="game/SpaceBuildings",e.icon.name=_.Z[n].PrefabModel)}return a}return F.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),r.ZP.on("connected",(()=>K())),r.ZP.on("disconnected",(()=>{R=[],F.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),Y.value="",M.splice(0)})),(0,n.bv)((()=>{r.ZP.getUser()&&K()})),(0,n.YP)(Y,(async e=>{L.value=!0,R=await r.ZP.corpdata(e).then((e=>e.members)),F.value=R,L.value=!1,B(M)})),(0,n.YP)((()=>M),B,{deep:!0}),(e,a)=>{const l=(0,n.Q2)("t");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(d.Z,null,{default:(0,n.w5)((()=>[(0,n._)("div",C,[(0,n._)("div",{class:(0,t.C_)(["filter",{disable:F.value.length>(0,i.SU)(R).length}])},[(0,n._)("div",null,[(0,n.wy)((0,n._)("button",{class:"btn-tech-filter",onClick:a[0]||(a[0]=e=>X.value=!0)},null,512),[[l,"FILTER"]])]),(0,n._)("div",k,[(0,n._)("select",{onChange:a[1]||(a[1]=e=>Y.value=e.target.value)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(N.value.roles,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.id,value:e.id,selected:Y.value==e.id},(0,t.zw)(e.name),9,Z)))),128))],32)])],2),(0,n._)("ul",{class:(0,t.C_)(["members-list",{"animated-fetch":L.value}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.value,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.userId,class:"member",onClick:a=>x(e)},[(0,n._)("div",y,[(0,n._)("div",b,[(0,n._)("img",{src:(0,i.SU)(o.g)(e.userId,e.avatar),alt:`${e.name} avatar`,onError:a[2]||(a[2]=e=>e.target.src=(0,i.SU)(v))},null,40,T)]),(0,n._)("p",null,(0,t.zw)(e.name),1)]),(0,n._)("div",I,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(G(e),((e,a)=>((0,n.wg)(),(0,n.iD)("li",{key:a},[(0,n._)("div",null,[(0,n.Wm)(u.Z,{name:e.icon.name,dir:e.icon.dir},null,8,["name","dir"]),(0,n._)("span",{k:a,class:"level"},(0,t.zw)(e.level),9,z)])])))),128))])])],8,w)))),128))],2)])])),_:1}),(0,n.Wm)(s.Z,{open:X.value,"onUpdate:open":a[4]||(a[4]=e=>X.value=e),title:"Code",size:(0,i.SU)(s.z).LARGE},{body:(0,n.w5)((()=>[(0,n._)("div",E,[(0,n._)("button",{class:"button accent",onClick:a[3]||(a[3]=e=>M.splice(0))},(0,t.zw)(e.$t("RESET_ALL")),1),(0,n._)("div",H,[(0,n._)("section",U,[(0,n.wy)((0,n._)("h3",null,null,512),[[l,"TID_OBJECT_ACTION_PLAYER_INFO"]]),(0,n._)("ul",null,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(A,(({icon:e},a)=>(0,n._)("li",{key:a,class:"item"},[(0,n._)("div",{class:(0,t.C_)({mute:q(a)}),onClick:()=>j({Name:a})},[(0,n.Wm)(u.Z,{name:e.name,dir:e.dir},null,8,["name","dir"])],10,D)]))),64))])])]),(0,n.Wm)(m.Z,{"on-click":j,"is-muted":q})])])),_:1},8,["open","size"]),(0,n.Wm)(s.Z,{open:W.value,"onUpdate:open":a[5]||(a[5]=e=>W.value=e),title:O.title,size:(0,i.SU)(s.z).LARGE},{body:(0,n.w5)((()=>[(0,n.Wm)(m.Z,{"level-map":O.lvlMap},null,8,["level-map"])])),_:1},8,["open","title","size"])])}}});var L=l(83744);const X=(0,L.Z)(A,[["__scopeId","data-v-64d028ba"]]),W=X}}]);