"use strict";(self["webpackChunkhades_space"]=self["webpackChunkhades_space"]||[]).push([[752],{12741:(t,e,a)=>{a.d(e,{Z:()=>k,V:()=>m});var l=a(66252);function s(t,e,a,s,n,o){const u=(0,l.up)("Page");return(0,l.wg)(),(0,l.j4)(u,{"title-loc-key":n.locKey,"content-args":{data:n.data,iconDir:"game/Modules",tableOpts:o.tableOpts},portrait:{src:n.img,alt:`${a.type} modules`}},null,8,["title-loc-key","content-args","portrait"])}var n=a(6790),o=a(20128),u=a(58904),i=a(92022);const{MaxModuleLevel:c}=u.Z,p=!!{NODE_ENV:"production",BASE_URL:"/HadesSpace/"}.VUE_APP_NEBULA_BUILD,d={Trade:"TID_TRADEITEM_ARTIFACT_UTILITY",Mining:"TID_TRADEITEM_ARTIFACT_UTILITY",Shield:"TID_TRADEITEM_ARTIFACT_COMBAT",Weapon:"TID_TRADEITEM_ARTIFACT_COMBAT",Support:"TID_TRADEITEM_ARTIFACT_SUPPORT"},r=(0,i.Z)(o.Z,{filter:([,t])=>!t.Hide,sort:([,t],[,e])=>p?t.RSLevel-e.RSLevel:t.AwardLevel-e.AwardLevel}),m=t=>(0,i.Z)(r,{filter:([,e])=>e.SlotType===t}),y={components:{Page:n.Z},props:{type:{type:String,required:!0},portrait:{type:String,required:!0},postFilter:{type:Function,default:t=>t}},data(){return{data:this.postFilter(this.addArtifactName(m(this.type))),img:a(17181)(`./${this.portrait}.png`),locKey:`TYPE_MOD_${this.type.toUpperCase()}`}},computed:{tableOpts(){const t=new Map;return{get colLvlStartAt(){if(p&&this.data?.body?.default){const e=this.data.body.default;t.has(e)||t.set(e,0);const a=t.get(e);if(a<1){let a=0;for(const t of this.data.body.default)a=a<t.length?t.length-1:a;return t.set(e,a),c-a}return c-a}return 1}}}},methods:{addArtifactName(t){for(const e of Object.values(t))e.SlotType&&e.RSLevel&&(e.artifact=`${this.$t(d[e.SlotType])} ${this.$t("TID_LEVEL_GENERIC",[e.RSLevel]).toLowerCase()}`);return t}}};var _=a(83744);const h=(0,_.Z)(y,[["render",s]]),k=h},74362:(t,e,a)=>{a.r(e),a.d(e,{default:()=>E});var l=a(66252),s=a(3577);const n=t=>((0,l.dD)("data-v-32b053ca"),t=t(),(0,l.Cn)(),t),o={class:"container"},u={class:"sections-input"},i=["onClick"],c={class:"levels"},p={class:"modal-module"},d={class:"title"},r={class:"reset-buttons"},m={class:"chars"},y=["onChange"],_=["selected","disabled"],h=n((()=>(0,l._)("br",null,null,-1))),k={key:0};function g(t,e,a,n,g,T){const C=(0,l.up)("calculator"),v=(0,l.up)("Icon"),D=(0,l.up)("modal"),w=(0,l.Q2)("t");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",o,[(0,l.Wm)(C,{input:t.input,"onUpdate:input":e[0]||(e[0]=e=>t.input=e),"stack-chars":t.stackChars,"calc-total":t.calcTotal,"local-storage-key":"modulesCalc","title-key":"MODULES_CALC",onSetup:t.setupCalculator},null,8,["input","stack-chars","calc-total","onSetup"]),(0,l._)("div",u,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.modules,((e,a)=>((0,l.wg)(),(0,l.iD)("section",{key:a,class:"type"},[(0,l._)("h3",null,(0,s.zw)(t.format.key(a)),1),(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e,(([e,a])=>((0,l.wg)(),(0,l.iD)("li",{key:e.Name,class:"module"},[(0,l._)("div",{class:(0,s.C_)({mute:!t.input.plan[e.Name]}),onClick:()=>t.openModuleInfo(e,a)},[(0,l.Wm)(v,{name:e.Icon,dir:"game/Modules"},null,8,["name"]),(0,l._)("div",c,[(0,l._)("span",null,(0,s.zw)(t.input.actually[e.Name]?t.input.actually[e.Name]:""),1),(0,l._)("span",null,(0,s.zw)(t.input.plan[e.Name]&&t.input.plan[e.Name]!=t.input.actually[e.Name]?t.input.plan[e.Name]:""),1)])],10,i)])))),128))])])))),128))])]),(0,l.Wm)(D,(0,l.dG)({open:t.openModal,"onUpdate:open":e[3]||(e[3]=e=>t.openModal=e)},t.modalOpts),{body:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l._)("div",d,[(0,l._)("div",null,[(0,l._)("h2",null,(0,s.zw)(t.$t(t.modalOpts.data.module.TID)),1),(0,l._)("div",r,[(0,l._)("button",{name:"plan",class:"button yellow",onClick:e[1]||(e[1]=(...e)=>t.onReset&&t.onReset(...e))},(0,s.zw)(t.$t("RESET_PLAN")),1),(0,l._)("button",{name:"all",class:"button red",onClick:e[2]||(e[2]=(...e)=>t.onReset&&t.onReset(...e))},(0,s.zw)(t.$t("RESET_ALL")),1)])]),(0,l.Wm)(v,{name:t.modalOpts.data.module.Icon,dir:"game/Modules"},null,8,["name"])]),(0,l._)("ul",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(t.input),(e=>((0,l.wg)(),(0,l.iD)("li",{key:e,class:"input"},[(0,l.wy)((0,l._)("span",null,null,512),[[w,t.inputLocKeys[e]]]),(0,l._)("select",{class:"select-lvl",onChange:a=>t.onChangeLvl(e,a.target.value)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.modalOpts.data.maxLevel+1,((a,n)=>((0,l.wg)(),(0,l.iD)("option",{key:a,selected:t.isSelected(e,n),disabled:t.isDisabled(e,n)},(0,s.zw)(n),9,_)))),128))],40,y)])))),128)),h,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(t.calc.output.plan[t.modalOpts.data.key]||{}),(e=>((0,l.wg)(),(0,l.iD)("li",{key:e,class:(0,s.C_)({output:!0,"sub-chars":"object"==typeof t.calc.output.plan?.[t.modalOpts.data.key]?.[e]})},[(0,l._)("b",null,(0,s.zw)(t.format.key(e)),1),(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(t.input),(a=>((0,l.wg)(),(0,l.iD)("span",{key:a,class:(0,s.C_)(t.outputClasses(a,e))},["object"===typeof t.calc.output[a]?.[t.modalOpts.data.key]?.[e]?((0,l.wg)(),(0,l.iD)("ul",k,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(t.calc.output[a][t.modalOpts.data.key][e]||{}),(a=>((0,l.wg)(),(0,l.iD)("li",{key:a,class:"output"},[(0,l._)("b",null,(0,s.zw)(t.format.key(a)),1),(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(t.input),(n=>((0,l.wg)(),(0,l.iD)("span",{key:n,class:(0,s.C_)(t.outputClasses(n,a))},(0,s.zw)(t.format.value(a,t.calc.output[n]?.[t.modalOpts.data.key]?.[e]?.[a])),3)))),128))])])))),128))])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,s.zw)(t.format.value(e,t.calc.output[a]?.[t.modalOpts.data.key]?.[e])),1)],64))],2)))),128))])],2)))),128))])])])),_:1},16,["open"])])}var T=a(90682),C=a(50139),v=a(6450),D=a(40885),w=a(39114),L=a(12741);const f=["UnlockPrice","UnlockTime"],b=["Trade","Mining","Weapon","Shield","Support"],A=(0,l.aZ)({name:"ModulesCalc",components:{Icon:T.Z,Modal:C.Z,Calculator:v.Z},data(){return{inputLocKeys:{actually:"CURRENT_LVL",plan:"PLAN_LVL"},format:{key:t=>(0,w.Z)(t,this.$route.name),value:(t,e)=>(0,D.Z)(t,e,null)},types:b,stackChars:f,modules:{},calc:{},input:{actually:{},plan:{}},resetConfirm:()=>new Promise((()=>null)),openModal:!1,modalOpts:{size:C.z.SMALL,title:this.$t("TID_TECH_DLG_TITLE"),data:{module:{},maxLevel:0,get key(){return this.module.Name}}}}},methods:{setupCalculator(t){this.calc=t;for(const e of b)this.modules[e]=t.provideGetterElements(((...t)=>O.apply(null,[e,...t])))},onChangeLvl(t,e){return this.calc.onChangeLvl(t,this.modalOpts.data.key,e)},isSelected(t,e){return this.calc.isSelected(t,this.modalOpts.data.key,e)},isDisabled(t,e){return this.calc.isDisabled(t,this.modalOpts.data.key,e)},async onReset(t){this.openModal&&("all"==t.target.name?(this.onChangeLvl("actually",0),this.onChangeLvl("plan",0)):this.onChangeLvl("plan",0))},outputClasses(t,e){return this.calc.outputClasses(t,this.modalOpts.data.key,e)},openModuleInfo(t,e){this.modalOpts.data.module=t,this.modalOpts.data.maxLevel=e,this.openModal=!0},calcTotal(t,e){const a=e.total;return a.result["ReqBank"]=0,function(e,l){const s=t[e].UnlockPrice,n=Array.isArray(s)?s[l.plan[e]-1]:s;a.result.ReqBank=n>a.result.ReqBank?n:a.result.ReqBank}}}});function O(t,...[e,a,l]){const s=(0,L.V)(t);return Object.entries(s).map((([t,n])=>{let o=1;for(const[,e]of Object.entries(n))Array.isArray(e)&&e.length>o&&(o=e.length);return l[t]=a(s[t],o),e[t]=n.TID,[n,o]}))}var I=a(83744);const R=(0,I.Z)(A,[["render",g],["__scopeId","data-v-32b053ca"]]),E=R}}]);