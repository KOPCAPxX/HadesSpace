"use strict";(self["webpackChunkhades_space"]=self["webpackChunkhades_space"]||[]).push([[934],{82353:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Y});var n=l(66252),i=l(2262),t=l(3577),o=l(37610),c=l(70131),s=l(57823),r=l(95893),u=l(77451),m=l(50930),d=l(74428),v=l(2824),p=l(72688),_=l(11815),g=l(45715),f=l(51131),h=l(20128),C=l(78642),w=l(91489);const Z={class:"container"},k={class:"select"},b=["value","selected"],y=["onClick"],T={class:"meta"},U={class:"avatar"},I=["src","alt"],S={class:"sort-tech"},z=["k"],E={class:"modal-filter-tech"},H={class:"sections-group other"},D={class:"type",name:"user-info"},P=["onClick"],A=5,L=50,M=(0,n.aZ)({__name:"CompendiumCorp",setup(e){const{t:a}=(0,c.QT)(),l=a("HS_COMPENDIUM"),{hourCycles:M}=new Intl.Locale(navigator.language),W=!M||["h23","h24"].some((e=>M.includes(e))),N={LocalTime:{icon:{name:"time",dir:"icons/compendium"},formatter:({localTime:e,localTime24:a})=>W?a:e},AfkFor:{icon:{name:"afk",dir:"icons/compendium"},formatter:({afkFor:e})=>e},CargoCap:{icon:{name:"cargo",dir:"icons/compendium"},formatter:({tech:e})=>{const[a]=e[(0,o.mX)("Transport")]||[],[l]=e[(0,o.mX)("TransportCapacity")]||[];return a&&l?g.Z.Transport.JobCapacity[a]+h.Z.TransportCapacity.ExtraTradeSlots[l]:0}}},Y=(0,i.iH)(!1),O=(0,i.iH)(!1),F=(0,i.iH)(!1),R=(0,i.iH)(""),X=(0,i.qj)([]),K=(0,i.iH)({}),j=(0,i.iH)([]),q=(0,i.qj)({title:"",lvlMap:void 0});let x=[];async function B(){Y.value=!0;const e=await r.ZP.corpdata();K.value=e,x=e.members,j.value=e.members.slice(0,L),Y.value=!1}async function G(e){J(e.Name)?X.splice(X.indexOf(e.Name),1):X.push(e.Name)}function J(e){return X.includes(e)}function Q(e){x.length&&(q.title=e.name,q.lvlMap=(0,C.Z)(e.tech,{map:([e,a])=>[(0,w.pc)(e),a[0]]}),F.value=!0)}function $(e){j.value=x.sort(((a,l)=>e.length&&!(e[0]in N)?(l.tech[(0,o.mX)(e[0])]?.[0]||0)-(a.tech[(0,o.mX)(e[0])]?.[0]||0):"CargoCap"==e[0]?N.CargoCap.formatter(l)-N.CargoCap.formatter(a):0)).slice(0,L)}function V(e){if(!X.length)return{};const a={},l=Object.fromEntries(X.map((a=>a in N?[a,N[a].formatter(e)]:[a,e.tech[(0,o.mX)(a)]?.[0]])).slice(-1*A));for(const n in l){const e=a[n]={icon:{dir:"",name:""},level:l[n]};n in h.Z?(e.icon.dir="game/Modules",e.icon.name=h.Z[n].Icon):n in g.Z?(e.icon.dir="game/Ships",e.icon.name=g.Z[n].Model[5]):n in N?e.icon=N[n].icon:(e.icon.dir="game/SpaceBuildings",e.icon.name=f.Z[n].PrefabModel)}return a}return j.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),r.ZP.on("connected",(()=>B())),r.ZP.on("disconnected",(()=>{x=[],j.value=Array.from({length:10},(e=>({userId:e,name:"",avatarUrl:""}))),R.value="",X.splice(0)})),(0,n.bv)((()=>{r.ZP.getUser()&&B()})),(0,n.YP)(R,(async e=>{Y.value=!0,x=await r.ZP.corpdata(e).then((e=>e.members)),j.value=x,Y.value=!1,$(X)})),(0,n.YP)((()=>X),$,{deep:!0}),(e,a)=>{const o=(0,n.Q2)("t");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,i.SU)(u.Fb),null,{default:(0,n.w5)((()=>[(0,n._)("title",null,(0,t.zw)((0,i.SU)(l)),1)])),_:1}),(0,n.Wm)(p.Z,null,{default:(0,n.w5)((()=>[(0,n._)("div",Z,[(0,n._)("div",{class:(0,t.C_)(["filter",{disable:j.value.length>(0,i.SU)(x).length}])},[(0,n._)("div",null,[(0,n.wy)((0,n._)("button",{class:"btn-tech-filter",onClick:a[0]||(a[0]=e=>O.value=!0)},null,512),[[o,"FILTER"]])]),(0,n._)("div",k,[(0,n._)("select",{onChange:a[1]||(a[1]=e=>R.value=e.target.value)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(K.value.roles,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e.id,value:e.id,selected:R.value==e.id},(0,t.zw)(e.name),9,b)))),128))],32)])],2),(0,n._)("ul",{class:(0,t.C_)(["members-list",{"animated-fetch":Y.value}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(j.value,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.userId,class:"member",onClick:a=>Q(e)},[(0,n._)("div",T,[(0,n._)("div",U,[(0,n._)("img",{src:(0,i.SU)(s.g)(e.userId,e.avatar),alt:`${e.name} avatar`,onError:a[2]||(a[2]=e=>e.target.src=(0,i.SU)(_))},null,40,I)]),(0,n._)("p",null,(0,t.zw)(e.name),1)]),(0,n._)("div",S,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(V(e),((e,a)=>((0,n.wg)(),(0,n.iD)("li",{key:a},[(0,n._)("div",null,[(0,n.Wm)(d.Z,{name:e.icon.name,dir:e.icon.dir},null,8,["name","dir"]),(0,n._)("span",{k:a,class:"level"},(0,t.zw)(e.level),9,z)])])))),128))])])],8,y)))),128))],2)])])),_:1}),(0,n.Wm)(m.Z,{open:O.value,"onUpdate:open":a[4]||(a[4]=e=>O.value=e),title:"Code",size:(0,i.SU)(m.z).LARGE},{body:(0,n.w5)((()=>[(0,n._)("div",E,[(0,n._)("button",{class:"button accent",onClick:a[3]||(a[3]=e=>X.splice(0))},(0,t.zw)(e.$t("RESET_ALL")),1),(0,n._)("div",H,[(0,n._)("section",D,[(0,n.wy)((0,n._)("h3",null,null,512),[[o,"TID_OBJECT_ACTION_PLAYER_INFO"]]),(0,n._)("ul",null,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(N,(({icon:e},a)=>(0,n._)("li",{key:a,class:"item"},[(0,n._)("div",{class:(0,t.C_)({mute:J(a)}),onClick:()=>G({Name:a})},[(0,n.Wm)(d.Z,{name:e.name,dir:e.dir},null,8,["name","dir"])],10,P)]))),64))])])]),(0,n.Wm)(v.Z,{"on-click":G,"is-muted":J})])])),_:1},8,["open","size"]),(0,n.Wm)(m.Z,{open:F.value,"onUpdate:open":a[5]||(a[5]=e=>F.value=e),title:q.title,size:(0,i.SU)(m.z).LARGE},{body:(0,n.w5)((()=>[(0,n.Wm)(v.Z,{"level-map":q.lvlMap},null,8,["level-map"])])),_:1},8,["open","title","size"])])}}});var W=l(83744);const N=(0,W.Z)(M,[["__scopeId","data-v-74305127"]]),Y=N}}]);